2025-11-27 22:51:12 | INFO     | root:setup_logging:66 | ================================================================================
2025-11-27 22:51:12 | INFO     | root:setup_logging:67 | Logging system initialized - Log file: c:\Projects\marei-mekomos\backend\logs\marei_mekomos_20251127.log
2025-11-27 22:51:12 | INFO     | root:setup_logging:68 | ================================================================================
2025-11-27 22:51:12 | INFO     | __main__:<module>:82 | Anthropic client initialized successfully
2025-11-27 22:51:12 | INFO     | __main__:<module>:611 | Starting Marei Mekomos API on http://0.0.0.0:8000
2025-11-27 22:51:12 | DEBUG    | asyncio:__init__:623 | Using proactor: IocpProactor
2025-11-27 22:51:53 | INFO     | root:setup_logging:66 | ================================================================================
2025-11-27 22:51:53 | INFO     | root:setup_logging:67 | Logging system initialized - Log file: c:\Projects\marei-mekomos\backend\logs\marei_mekomos_20251127.log
2025-11-27 22:51:53 | INFO     | root:setup_logging:68 | ================================================================================
2025-11-27 22:51:53 | INFO     | __main__:<module>:82 | Anthropic client initialized successfully
2025-11-27 22:51:53 | INFO     | __main__:<module>:667 | Starting Marei Mekomos API on http://0.0.0.0:8000
2025-11-27 22:51:53 | DEBUG    | asyncio:__init__:623 | Using proactor: IocpProactor
2025-11-27 22:52:11 | INFO     | __main__:search_sources:583 | ================================================================================
2025-11-27 22:52:11 | INFO     | __main__:search_sources:584 | POST /search -> topic='rav huna chuppas niddah rambam' level='advanced'
2025-11-27 22:52:11 | INFO     | __main__:search_sources:585 | ================================================================================
2025-11-27 22:52:11 | DEBUG    | cache_manager:get:52 | Cache DISABLED (via USE_CACHE env var)
2025-11-27 22:52:11 | INFO     | __main__:get_sources_from_claude:215 | STAGE 0: Interpreting query 'rav huna chuppas niddah rambam'
2025-11-27 22:52:11 | DEBUG    | anthropic._base_client:_build_request:493 | Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': Timeout(connect=5.0, read=600, write=600, pool=600), 'files': None, 'idempotency_key': 'stainless-python-retry-83e84445-7c00-46a7-a313-0f68df9a9683', 'json_data': {'max_tokens': 500, 'messages': [{'role': 'user', 'content': 'The user searched for: "rav huna chuppas niddah rambam"\n\nThis might be a shorthand query that needs interpretation. Your job is to figure out what they\'re REALLY asking about.\n\nExamples:\n- "rav huna chuppas niddah rambam" → They want sources about whether chuppah creates kiddushin when the woman is a niddah (Rav Huna\'s position and Rambam\'s ruling in Hilchos Ishut, NOT Issurei Biah)\n- "bedikas chometz" → They want sources about the obligation to search for chometz before Pesach (Orach Chaim)  \n- "kibud av" → They want sources about the mitzvah to honor parents (Yoreh Deah)\n\nThink carefully about:\n1. What is the MAIN TOPIC? (e.g., kiddushin/marriage, chometz, kibud av)\n2. What SPECIFIC ASPECT? (e.g., chuppah as kinyan, bedikah obligation, honoring father)\n3. Which seforim/chapters would discuss this? (Be precise - Hilchos Ishut vs. Issurei Biah matters!)\n4. Are specific people/positions mentioned? (e.g., Rav Huna, Rambam, Rashi)\n\nCRITICAL: Don\'t get confused by keywords! "chuppas niddah" is about KIDDUSHIN (marriage), not about niddah laws.\n\nReturn ONLY a JSON object:\n{\n  "interpreted_query": "A clear, detailed description of what the user is asking",\n  "main_topic": "The primary subject area",\n  "relevant_areas": ["Specific Rambam chapters, SA sections, or masechtos"],\n  "specific_question": "The exact question or case being asked about"\n}\n'}], 'model': 'claude-sonnet-4-20250514', 'system': "You are a Torah scholar who interprets user queries to understand what they're really asking about. Pay close attention to context, not just keywords."}}
2025-11-27 22:52:11 | DEBUG    | anthropic._base_client:request:1045 | Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-11-27 22:52:11 | DEBUG    | httpcore.connection:trace:47 | connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=5.0 socket_options=[(65535, 8, True), (6, 17, 60), (6, 16, 5), (6, 3, 60)]
2025-11-27 22:52:11 | DEBUG    | httpcore.connection:trace:47 | connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000172C347D7C0>
2025-11-27 22:52:11 | DEBUG    | httpcore.connection:trace:47 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C31EECC0> server_hostname='api.anthropic.com' timeout=5.0
2025-11-27 22:52:11 | DEBUG    | httpcore.connection:trace:47 | start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000172C347D550>
2025-11-27 22:52:11 | DEBUG    | httpcore.http11:trace:47 | send_request_headers.started request=<Request [b'POST']>
2025-11-27 22:52:11 | DEBUG    | httpcore.http11:trace:47 | send_request_headers.complete
2025-11-27 22:52:11 | DEBUG    | httpcore.http11:trace:47 | send_request_body.started request=<Request [b'POST']>
2025-11-27 22:52:11 | DEBUG    | httpcore.http11:trace:47 | send_request_body.complete
2025-11-27 22:52:11 | DEBUG    | httpcore.http11:trace:47 | receive_response_headers.started request=<Request [b'POST']>
2025-11-27 22:52:16 | DEBUG    | httpcore.http11:trace:47 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:14 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'30000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-11-28T03:52:11Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-11-28T03:52:16Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-11-28T03:52:11Z'), (b'retry-after', b'51'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'38000'), (b'anthropic-ratelimit-tokens-reset', b'2025-11-28T03:52:11Z'), (b'request-id', b'req_011CVZcFqPb8HyWFdRk94GWa'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'73a09491-cda3-40b4-8544-d00ca1bc9331'), (b'x-envoy-upstream-service-time', b'4924'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9a56e934c9699608-EWR')])
2025-11-27 22:52:16 | INFO     | httpx:_send_single_request:1025 | HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-11-27 22:52:16 | DEBUG    | httpcore.http11:trace:47 | receive_response_body.started request=<Request [b'POST']>
2025-11-27 22:52:16 | DEBUG    | httpcore.http11:trace:47 | receive_response_body.complete
2025-11-27 22:52:16 | DEBUG    | httpcore.http11:trace:47 | response_closed.started
2025-11-27 22:52:16 | DEBUG    | httpcore.http11:trace:47 | response_closed.complete
2025-11-27 22:52:16 | DEBUG    | anthropic._base_client:request:1083 | HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 28 Nov 2025 03:52:14 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '30000', 'anthropic-ratelimit-input-tokens-reset': '2025-11-28T03:52:11Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-11-28T03:52:16Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-11-28T03:52:11Z', 'retry-after': '51', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '38000', 'anthropic-ratelimit-tokens-reset': '2025-11-28T03:52:11Z', 'request-id': 'req_011CVZcFqPb8HyWFdRk94GWa', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '73a09491-cda3-40b4-8544-d00ca1bc9331', 'x-envoy-upstream-service-time': '4924', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9a56e934c9699608-EWR'})
2025-11-27 22:52:16 | DEBUG    | anthropic._base_client:request:1091 | request_id: req_011CVZcFqPb8HyWFdRk94GWa
2025-11-27 22:52:16 | DEBUG    | __main__:parse_claude_json:457 | Successfully parsed JSON
2025-11-27 22:52:16 | INFO     | __main__:get_sources_from_claude:252 | ✓ Interpreted query as: The user is asking about Rav Huna's position regarding whether chuppah (the wedding canopy ceremony) can create valid kiddushin when the bride is in a state of niddah, and wants to know how the Rambam rules on this matter in the laws of marriage
2025-11-27 22:52:16 | DEBUG    | __main__:get_sources_from_claude:253 | Full interpretation: {'interpreted_query': "The user is asking about Rav Huna's position regarding whether chuppah (the wedding canopy ceremony) can create valid kiddushin when the bride is in a state of niddah, and wants to know how the Rambam rules on this matter in the laws of marriage", 'main_topic': 'Kiddushin and marriage laws - specifically the validity of chuppah as a kinyan kiddushin', 'relevant_areas': ['Hilchos Ishut', 'Masechet Kiddushin', 'Even HaEzer'], 'specific_question': "Does chuppah create valid kiddushin when the woman is a niddah according to Rav Huna's opinion and the Rambam's final ruling"}
2025-11-27 22:52:16 | INFO     | __main__:get_sources_from_claude:261 | STAGE 1: Requesting acharonim to search
2025-11-27 22:52:16 | DEBUG    | __main__:get_sources_from_claude:287 | Step 1 message to Claude: User's original query: "rav huna chuppas niddah rambam"

INTERPRETED QUERY: The user is asking about Rav Huna's position regarding whether chuppah (the wedding canopy ceremony) can create valid kiddushin when the bride is in a state of niddah, and wants to know how the Rambam rules on this matter in the laws of marriage

Level: advanced - Include comprehensive coverage with multiple shittos - return 10-20 sources.

STEP 1: Based on the INTERPRETED QUERY above, identify which acharonim and late rishonim on Sefaria would discuss THIS SPECIFIC TOPIC.

Return a JSON object with 'acharonim_to_search' containing 5-10 relevant sources.

CRITICAL REMINDERS:
- Use the INTERPRETED QUERY to understand what the user wants
- Be specific about WHERE in each acharon (e.g., 'Pnei Yehoshua on Kiddushin 5a', not just 'Pnei Yehoshua')
- Don't be fooled by keywords - understand the actual topic (e.g., 'chuppas niddah' is about kiddushin, not niddah laws)
- Choose acharonim that discuss the SPECIFIC QUESTION asked, not just the general topic
2025-11-27 22:52:16 | DEBUG    | anthropic._base_client:_build_request:493 | Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': Timeout(connect=5.0, read=600, write=600, pool=600), 'files': None, 'idempotency_key': 'stainless-python-retry-b91c1e6b-cf5d-4335-ace9-05a2b68d7a4d', 'json_data': {'max_tokens': 1500, 'messages': [{'role': 'user', 'content': 'User\'s original query: "rav huna chuppas niddah rambam"\n\nINTERPRETED QUERY: The user is asking about Rav Huna\'s position regarding whether chuppah (the wedding canopy ceremony) can create valid kiddushin when the bride is in a state of niddah, and wants to know how the Rambam rules on this matter in the laws of marriage\n\nLevel: advanced - Include comprehensive coverage with multiple shittos - return 10-20 sources.\n\nSTEP 1: Based on the INTERPRETED QUERY above, identify which acharonim and late rishonim on Sefaria would discuss THIS SPECIFIC TOPIC.\n\nReturn a JSON object with \'acharonim_to_search\' containing 5-10 relevant sources.\n\nCRITICAL REMINDERS:\n- Use the INTERPRETED QUERY to understand what the user wants\n- Be specific about WHERE in each acharon (e.g., \'Pnei Yehoshua on Kiddushin 5a\', not just \'Pnei Yehoshua\')\n- Don\'t be fooled by keywords - understand the actual topic (e.g., \'chuppas niddah\' is about kiddushin, not niddah laws)\n- Choose acharonim that discuss the SPECIFIC QUESTION asked, not just the general topic'}], 'model': 'claude-sonnet-4-20250514', 'system': 'You are a Torah scholar assistant that helps find marei mekomos (source references) for any Torah topic using a "sugya archaeology" approach.\n\nMETHODOLOGY - WORK BACKWARDS FROM ACHARONIM:\nInstead of guessing which sources are important, you will search through later commentaries (acharonim and late rishonim) to discover which earlier sources THEY cite most frequently. This reveals the true "ikkar" (foundation) of the sugya.\n\nSTEP 1 - IDENTIFY RELEVANT META-COMMENTARIES:\nBased on the topic, determine which acharonim/late rishonim would discuss it:\n\nFor Gemara topics:\n- Pnei Yehoshua (on most masechtos)\n- Rabbi Akiva Eiger\n- Late Rishonim who quote earlier sources: Ran, Ritva, Rashba, Nimukei Yosef\n\nFor Halachic topics (Orach Chaim/Yoreh Deah):\n- Mishnah Berurah\n- Shach, Taz\n- Beur Halacha\n\nFor Even HaEzer/Choshen Mishpat:\n- Ketzos HaChoshen, Nesivos HaMishpat\n- Chelkas Mechokek, Beis Shmuel\n\nFor Rambam:\n- Kesef Mishneh, Magid Mishneh, Lechem Mishneh\n\nAlways include:\n- Shulchan Aruch, Rama, Tur\n- Beis Yosef, Darchei Moshe\n\nSTEP 2 - SEARCH THESE SOURCES ON SEFARIA:\nReturn Sefaria references to WHERE these acharonim discuss this topic. For example:\n- "Pnei Yehoshua on Kiddushin 5a"\n- "Mishnah Berurah 431:1"\n- "Ketzos HaChoshen 201:1"\n\nSTEP 3 - IDENTIFY CITATION PATTERNS:\nYou will be given the TEXT of these acharonim. Your job is to:\n1. Extract which earlier sources they cite (ignore their lomdus/svara)\n2. Count how many times each source appears across multiple acharonim\n3. Prioritize sources cited by multiple acharonim - these are the ikkar!\n\nCRITICAL RULES:\n1. Use EXACT Sefaria reference formats\n2. DO NOT make up sources - only suggest what exists on Sefaria\n3. For Gemara: "Kiddushin 5a", "Berakhot 6b"\n4. For Chumash: "Shemot 12:15", "Bereishit 1:1"\n5. For Rishonim: "Rashi on Kiddushin 5a", "Tosafot on Kiddushin 5a"\n6. For Rambam: "Mishneh Torah, Ishut 10:2"\n7. For Shulchan Aruch: "Shulchan Arukh, Even HaEzer 55:1"\n\nRESPONSE FORMAT:\nReturn TWO JSON objects:\n\nFirst - the acharonim to search:\n{\n  "acharonim_to_search": [\n    {"ref": "Pnei Yehoshua on Kiddushin 5a", "category": "Acharonim"},\n    {"ref": "Ketzos HaChoshen 201:1", "category": "Acharonim"},\n    ...\n  ]\n}\n\nAfter analyzing their texts, return the final sources:\n{\n  "sources": [\n    {"ref": "Kiddushin 5a", "category": "Gemara", "citation_count": 5},\n    {"ref": "Rashi on Kiddushin 5a", "category": "Rishonim", "citation_count": 4},\n    ...\n  ],\n  "summary": "Brief summary of the sugya"\n}\n\nOnly return valid JSON, no other text.'}}
2025-11-27 22:52:16 | DEBUG    | anthropic._base_client:request:1045 | Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-11-27 22:52:16 | DEBUG    | httpcore.http11:trace:47 | send_request_headers.started request=<Request [b'POST']>
2025-11-27 22:52:16 | DEBUG    | httpcore.http11:trace:47 | send_request_headers.complete
2025-11-27 22:52:16 | DEBUG    | httpcore.http11:trace:47 | send_request_body.started request=<Request [b'POST']>
2025-11-27 22:52:16 | DEBUG    | httpcore.http11:trace:47 | send_request_body.complete
2025-11-27 22:52:16 | DEBUG    | httpcore.http11:trace:47 | receive_response_headers.started request=<Request [b'POST']>
2025-11-27 22:52:21 | DEBUG    | httpcore.http11:trace:47 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:19 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'29000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-11-28T03:52:17Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-11-28T03:52:22Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-11-28T03:52:15Z'), (b'retry-after', b'45'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'37000'), (b'anthropic-ratelimit-tokens-reset', b'2025-11-28T03:52:17Z'), (b'request-id', b'req_011CVZcGCjEHj2fSgxw6m1nH'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'73a09491-cda3-40b4-8544-d00ca1bc9331'), (b'x-envoy-upstream-service-time', b'5227'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9a56e953fcf09608-EWR')])
2025-11-27 22:52:21 | INFO     | httpx:_send_single_request:1025 | HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-11-27 22:52:21 | DEBUG    | httpcore.http11:trace:47 | receive_response_body.started request=<Request [b'POST']>
2025-11-27 22:52:21 | DEBUG    | httpcore.http11:trace:47 | receive_response_body.complete
2025-11-27 22:52:21 | DEBUG    | httpcore.http11:trace:47 | response_closed.started
2025-11-27 22:52:21 | DEBUG    | httpcore.http11:trace:47 | response_closed.complete
2025-11-27 22:52:21 | DEBUG    | anthropic._base_client:request:1083 | HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 28 Nov 2025 03:52:19 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '29000', 'anthropic-ratelimit-input-tokens-reset': '2025-11-28T03:52:17Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-11-28T03:52:22Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-11-28T03:52:15Z', 'retry-after': '45', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '37000', 'anthropic-ratelimit-tokens-reset': '2025-11-28T03:52:17Z', 'request-id': 'req_011CVZcGCjEHj2fSgxw6m1nH', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '73a09491-cda3-40b4-8544-d00ca1bc9331', 'x-envoy-upstream-service-time': '5227', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9a56e953fcf09608-EWR'})
2025-11-27 22:52:21 | DEBUG    | anthropic._base_client:request:1091 | request_id: req_011CVZcGCjEHj2fSgxw6m1nH
2025-11-27 22:52:21 | DEBUG    | __main__:get_sources_from_claude:296 | Claude Step 1 response received. Usage: Usage(cache_creation=CacheCreation(ephemeral_1h_input_tokens=0, ephemeral_5m_input_tokens=0), cache_creation_input_tokens=0, cache_read_input_tokens=0, input_tokens=1294, output_tokens=385, server_tool_use=None, service_tier='standard')
2025-11-27 22:52:21 | DEBUG    | __main__:get_sources_from_claude:302 | Step 1 response length: 834 characters
2025-11-27 22:52:21 | DEBUG    | __main__:parse_claude_json:436 | Extracting JSON from markdown json fence
2025-11-27 22:52:21 | DEBUG    | __main__:parse_claude_json:457 | Successfully parsed JSON
2025-11-27 22:52:21 | INFO     | __main__:get_sources_from_claude:311 | Claude identified 10 acharonim to search
2025-11-27 22:52:21 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Kesef Mishneh on Mishneh Torah, Ishut 10:10
2025-11-27 22:52:21 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Kesef Mishneh on Mishneh Torah, Ishut 10:10'
2025-11-27 22:52:21 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Kesef%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:10
2025-11-27 22:52:21 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C358DB50>
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CA40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C344D250>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:52:20 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Kesef%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:10'), (b'x-varnish', b'877469326'), (b'Age', b'0'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=IRM9P6qVYTnHX7ngb7yx1VkdwKrEePI%2BSRmKR2EaS6TX8%2BJ%2BXBJsi%2Bn4iU9yXmgqyE%2BZQ%2B1Zbq3ZFdBp2e1CEgvdenfEertsLYRRXBJa"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9758f7b8095-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:22 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Kesef%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:10 "HTTP/1.1 404 Not Found"
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:22 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Kesef Mishneh on Mishneh Torah, Ishut 10:10'
2025-11-27 22:52:22 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Kesef Mishneh on Mishneh Torah, Ishut 10:10'
2025-11-27 22:52:22 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Kesef Mishneh on Mishneh Torah, Ishut 10.10"}
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:22 | WARNING  | __main__:get_sources_from_claude:333 | Could not fetch text for Kesef Mishneh on Mishneh Torah, Ishut 10:10
2025-11-27 22:52:22 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Magid Mishneh on Mishneh Torah, Ishut 10:10
2025-11-27 22:52:22 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Magid Mishneh on Mishneh Torah, Ishut 10:10'
2025-11-27 22:52:22 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Magid%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:10
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35F7040>
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CB40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35EAD90>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:52:20 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Magid%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:10'), (b'x-varnish', b'858621485'), (b'Age', b'0'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=mv1rY7we%2F3bLwl9SjxASXfDwwcmuImXWqm%2B4VcKm2kga20JH3HbLMINsj73J82a5bGODd5l35zWF2RIMOftO%2FJ1pvKOCYzy9JGNeOIzu"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9766dc46e53-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:22 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Magid%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:10 "HTTP/1.1 404 Not Found"
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:22 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Magid Mishneh on Mishneh Torah, Ishut 10:10'
2025-11-27 22:52:22 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Magid Mishneh on Mishneh Torah, Ishut 10:10'
2025-11-27 22:52:22 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Magid Mishneh on Mishneh Torah, Ishut 10.10"}
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:22 | WARNING  | __main__:get_sources_from_claude:333 | Could not fetch text for Magid Mishneh on Mishneh Torah, Ishut 10:10
2025-11-27 22:52:22 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Lechem Mishneh on Mishneh Torah, Ishut 10:10
2025-11-27 22:52:22 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Lechem Mishneh on Mishneh Torah, Ishut 10:10'
2025-11-27 22:52:22 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Lechem%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:10
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FA6D0>
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CC40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C344D370>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:52:20 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Lechem%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:10'), (b'x-varnish', b'862820560'), (b'Age', b'0'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=Z2V3wPPBAYI0Tu2Frkc6iOUA5KLExOhTxKASeC6VGl4eeMTfv7axC2owl5kyf5wsy3nBKPzfZjZLgS9FHr1EeZuB2ok4OV8FlOibTdO%2B"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9773fc08b88-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:22 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Lechem%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:10 "HTTP/1.1 404 Not Found"
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:22 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Lechem Mishneh on Mishneh Torah, Ishut 10:10'
2025-11-27 22:52:22 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Lechem Mishneh on Mishneh Torah, Ishut 10:10'
2025-11-27 22:52:22 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Lechem Mishneh on Mishneh Torah, Ishut 10.10"}
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:22 | WARNING  | __main__:get_sources_from_claude:333 | Could not fetch text for Lechem Mishneh on Mishneh Torah, Ishut 10:10
2025-11-27 22:52:22 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Beit Yosef on Tur, Even HaEzer 61
2025-11-27 22:52:22 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Beit Yosef on Tur, Even HaEzer 61'
2025-11-27 22:52:22 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Beit%20Yosef%20on%20Tur,%20Even%20HaEzer%2061
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FAF40>
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CCC0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:22 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FAA00>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:22 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Date', b'Fri, 28 Nov 2025 03:52:22 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'348'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Beit%20Yosef%20on%20Tur,%20Even%20HaEzer%2061'), (b'x-varnish', b'872190795'), (b'Age', b'0'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=c4ulvQJYk56xI8gG%2Bq%2FGwB3wi7HeJfJ69AsAQwqylinCEmH63JBe59apd5HReHwZ6pg3qwDxKLJEZLZsUuB3S67QxnLMepTZK3skv65U"}]}'), (b'CF-RAY', b'9a56e9796e186dc6-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:24 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Beit%20Yosef%20on%20Tur,%20Even%20HaEzer%2061 "HTTP/1.1 400 Bad Request"
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:24 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 400 for ref='Beit Yosef on Tur, Even HaEzer 61'
2025-11-27 22:52:24 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 400 for 'Beit Yosef on Tur, Even HaEzer 61'
2025-11-27 22:52:24 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "You passed 'Beit Yosef', please pass a more specific ref for this book, and try again. 'Beit Yosef' is a 'complex' book-level ref. We only support book-level refs in cases of texts with a 'simple' structure. To learn more about the structure of a text on Sefaria, see: https://developers.sefaria.org/docs/the-structure-of-a-simple-text"}
2025-11-27 22:52:24 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:24 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:24 | WARNING  | __main__:get_sources_from_claude:333 | Could not fetch text for Beit Yosef on Tur, Even HaEzer 61
2025-11-27 22:52:24 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1
2025-11-27 22:52:24 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:52:24 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Chelkat%20Mechokek%20on%20Shulchan%20Arukh,%20Even%20HaEzer%2061:1
2025-11-27 22:52:24 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:24 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35F7460>
2025-11-27 22:52:24 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C358C9C0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:24 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35F7E50>
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:22 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Chelkat%20Mechokek%20on%20Shulchan%20Arukh,%20Even%20HaEzer%2061:1'), (b'x-varnish', b'883360610 850664789'), (b'Age', b'1489'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=K8IAI54LxJqlr6mOdPtGPh2F%2B0lE1Dys8qXnniNt60616JCRgNkJ8H8YkpqprOfOweA%2Bt5vTbSVYvkAxWgnULKXxu8KKd%2BzGmg6q7R0a"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9832a110f80-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:24 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Chelkat%20Mechokek%20on%20Shulchan%20Arukh,%20Even%20HaEzer%2061:1 "HTTP/1.1 200 OK"
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:24 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:52:24 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:24 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:52:24 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Vilna, 1876, text_type=list
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 7385 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 4233 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 7091 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 38 items -> 16329 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 2942 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 4118 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 29 items -> 13570 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 173 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 2307 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 3837 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 5185 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 2447 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 4328 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 2614 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 699 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 122 items -> 93032 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 238 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1406 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 2035 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 2730 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 21 items -> 4981 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 773 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 240 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 998 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 1550 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 24 items -> 8517 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 43 items -> 21013 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 8156 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 6355 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 20 items -> 6490 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 3042 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1078 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 1011 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 35 items -> 12761 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 2363 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 45 items -> 13243 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 58 items -> 17254 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 4371 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 5102 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1113 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 10981 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1096 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 3805 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 5430 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 7986 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1494 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1433 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 762 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 8654 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 15 items -> 5217 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 894 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 5877 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 471 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 4242 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 1609 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 340 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 607 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 451 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 6043 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 3485 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 1323 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 2098 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 349 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 48 items -> 15810 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 3311 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 4843 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 2734 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 45 items -> 14931 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 3048 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 1431 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 6540 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 20 items -> 6682 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 20 items -> 5041 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 33 items -> 25583 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 3200 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 666 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 35 items -> 10146 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 3477 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 2528 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 2059 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 709 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 45 items -> 12542 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 4289 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1157 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 4893 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1425 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 63 items -> 18291 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 4659 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 3186 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 49 items -> 11539 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 2493 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 5607 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 35 items -> 12023 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 2606 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 5670 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 3132 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 44 items -> 14091 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 2011 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 24 items -> 8889 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 4818 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 4406 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 6639 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 3213 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 20 items -> 6250 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1077 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 815 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 1683 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 3757 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 35 items -> 8231 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 24 items -> 8061 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 3397 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 37 items -> 13424 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 3777 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 12291 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 28 items -> 12669 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 27 items -> 8523 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 27 items -> 7512 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 3135 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 2166 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 3014 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 24 items -> 7105 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 43 items -> 10340 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 39 items -> 9298 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 1638 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 6951 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 287 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 1227 characters
2025-11-27 22:52:24 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 144 items -> 758846 characters
2025-11-27 22:52:24 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 758846 characters
2025-11-27 22:52:24 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 739468 characters
2025-11-27 22:52:24 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:24 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1': he_text=yes en_text=no
2025-11-27 22:52:24 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:24 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:24 | DEBUG    | __main__:get_sources_from_claude:331 | Successfully fetched text for Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1
2025-11-27 22:52:24 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1
2025-11-27 22:52:24 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:52:24 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Beit%20Shmuel%20on%20Shulchan%20Arukh,%20Even%20HaEzer%2061:1
2025-11-27 22:52:24 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:24 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C346C070>
2025-11-27 22:52:24 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CDC0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:24 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35EA5E0>
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:24 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:22 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Beit%20Shmuel%20on%20Shulchan%20Arukh,%20Even%20HaEzer%2061:1'), (b'x-varnish', b'884252829 856332761'), (b'Age', b'1489'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=tZWwuuD9JpaSgIRTSfl5K4FDTKWg1L0SzQzPz9j3thb8BwQZ0XqUehztttIoMZU418yI0nwrEJUhU1TQTfeJplWiCb1c6x%2Bx7MYGp30r"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e986fe994282-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:25 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Beit%20Shmuel%20on%20Shulchan%20Arukh,%20Even%20HaEzer%2061:1 "HTTP/1.1 200 OK"
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:25 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Vilna, 1876, text_type=list
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 25 items -> 10374 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 10125 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 8664 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 67 items -> 29188 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 7767 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 34 items -> 14498 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 43 items -> 21867 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 418 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 2367 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 3896 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 11455 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 2487 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 38 items -> 12677 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 25 items -> 12331 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 3741 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 172 items -> 82612 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 266 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 1272 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 2566 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 5043 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 6251 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1053 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 248 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 1593 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 2144 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 25 items -> 9954 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 60 items -> 37651 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 25 items -> 11132 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 7323 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 11454 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 2968 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 787 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 1103 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 39 items -> 14133 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 2742 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 52 items -> 25163 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 70 items -> 25628 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 9686 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 5649 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 1022 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 14870 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1102 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 5256 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 24 items -> 10643 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 8026 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 3345 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 1178 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1105 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 18340 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 7715 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 728 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 8979 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 992 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 4110 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 1657 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 2906 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 405 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 138 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 6485 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 6544 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1898 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 3707 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 1168 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 29 items -> 14794 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 5872 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 25 items -> 11918 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 2818 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 36 items -> 11996 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 3355 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 837 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 8225 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 20 items -> 7133 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 4211 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 33 items -> 19354 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 3980 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1784 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 27 items -> 7805 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 2837 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 3092 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 2076 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 593 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 42 items -> 17184 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 7522 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1019 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 6267 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 2016 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 69 items -> 28409 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 10377 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 21 items -> 6372 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 49 items -> 17190 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 3503 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 5677 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 40 items -> 16831 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 5150 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 9245 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 2267 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 44 items -> 18286 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 2624 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 26 items -> 8294 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 5557 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 2086 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 4575 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 4594 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 5741 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 1269 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1921 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 1430 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 3684 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 33 items -> 15061 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 9053 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 8695 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 37 items -> 15604 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 6841 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 25 items -> 14681 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 28 items -> 10331 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 9985 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 9778 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 7705 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 3707 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 4440 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 21 items -> 9415 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 38 items -> 11049 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 41 items -> 14942 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 9028 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 8258 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 51 items -> 23187 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 32 items -> 19743 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 5020 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 8299 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1666 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 15 items -> 5068 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 3250 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 4439 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 2430 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 5808 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 31 items -> 15532 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 6989 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 109 items -> 44771 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 42 items -> 17899 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 34 items -> 19192 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 15 items -> 10208 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 6702 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 3814 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 4294 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 6162 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 1892 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 1403 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 600 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 5732 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 2577 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 35 items -> 18650 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 34 items -> 18385 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 11676 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 4488 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 2003 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 4186 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 5002 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 1790 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 615 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 5040 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 4624 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 7998 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 4414 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 2694 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 4022 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 56 items -> 26974 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 15 items -> 11438 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1307 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 4882 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 9328 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 5253 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 6133 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 1454 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 2157 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 3940 characters
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 178 items -> 1408245 characters
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 1408245 characters
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 1375772 characters
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:25 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1': he_text=yes en_text=no
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:25 | DEBUG    | __main__:get_sources_from_claude:331 | Successfully fetched text for Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1
2025-11-27 22:52:25 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Ran on Kiddushin 5a
2025-11-27 22:52:25 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Ran on Kiddushin 5a'
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Ran%20on%20Kiddushin%205a
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FC130>
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347C940> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FC3A0>
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:23 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Ran%20on%20Kiddushin%205a'), (b'x-varnish', b'858621502 855622220'), (b'Age', b'1215'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=5MHDbGxuzu31sc32scEbf3U7Pd1BFPFENVq%2BlylBldb62QdOEGXSqvuYSMIdHCTpiP%2FJFyH0%2B6T0hcqionMBTkgcCQAC1U6uxC1Za7ZB"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e98c9a4d41ad-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:25 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Ran%20on%20Kiddushin%205a "HTTP/1.1 200 OK"
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:25 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Ran on Kiddushin 5a'
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Ran on Kiddushin 5a'
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Vilna Edition, text_type=list
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 6883 characters
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 6883 characters
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 6308 characters
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:25 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Ran on Kiddushin 5a': he_text=yes en_text=no
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:25 | DEBUG    | __main__:get_sources_from_claude:331 | Successfully fetched text for Ran on Kiddushin 5a
2025-11-27 22:52:25 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Rashba on Kiddushin 5a
2025-11-27 22:52:25 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Rashba on Kiddushin 5a'
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Rashba%20on%20Kiddushin%205a
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FF580>
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CA40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FEDF0>
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:23 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Rashba%20on%20Kiddushin%205a'), (b'x-varnish', b'883360669 881136125'), (b'Age', b'1151'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=V7CIH8R3TLH8mV3V21OFjCtYYnTfSGHB5S1ET2j7hA8QRjVTrgo%2BafXsJGVxwoNOAYdO9%2FLOJ6zZRc2ExMt2K%2B0YItmKFuzavggEOg%3D%3D"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e98d5c200c94-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:25 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Rashba%20on%20Kiddushin%205a "HTTP/1.1 200 OK"
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:25 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:25 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Rashba on Kiddushin 5a'
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Rashba on Kiddushin 5a'
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Gerlitz edition, published by Oraita, text_type=list
2025-11-27 22:52:25 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 5186 characters
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 5186 characters
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 5107 characters
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:25 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Rashba on Kiddushin 5a': he_text=yes en_text=no
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:25 | DEBUG    | __main__:get_sources_from_claude:331 | Successfully fetched text for Rashba on Kiddushin 5a
2025-11-27 22:52:25 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Ritva on Kiddushin 5a
2025-11-27 22:52:25 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Ritva on Kiddushin 5a'
2025-11-27 22:52:25 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Ritva%20on%20Kiddushin%205a
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A2C10>
2025-11-27 22:52:25 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CEC0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:26 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A29A0>
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:24 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Ritva%20on%20Kiddushin%205a'), (b'x-varnish', b'867637023 855622225'), (b'Age', b'1215'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=%2BvdOCd%2BbUIc0kcwu1Ffi5ufAmzTqXlFZXVstpqcRxpjHaZsyjSKPYaPj9EyYUZsOrkCWJJnI7%2B0GZUK4jpqZn81nPziT4gGBEIft21gE"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e98e2a47f799-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:26 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Ritva%20on%20Kiddushin%205a "HTTP/1.1 200 OK"
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:26 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Ritva on Kiddushin 5a'
2025-11-27 22:52:26 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:26 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Ritva on Kiddushin 5a'
2025-11-27 22:52:26 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Chiddushei haRitva, Munkatch, 1908., text_type=list
2025-11-27 22:52:26 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 4707 characters
2025-11-27 22:52:26 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 4707 characters
2025-11-27 22:52:26 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 4664 characters
2025-11-27 22:52:26 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:26 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Ritva on Kiddushin 5a': he_text=yes en_text=no
2025-11-27 22:52:26 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:26 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:26 | DEBUG    | __main__:get_sources_from_claude:331 | Successfully fetched text for Ritva on Kiddushin 5a
2025-11-27 22:52:26 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Nimukei Yosef on Kiddushin 2a
2025-11-27 22:52:26 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Nimukei Yosef on Kiddushin 2a'
2025-11-27 22:52:26 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Nimukei%20Yosef%20on%20Kiddushin%202a
2025-11-27 22:52:26 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:26 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FFA00>
2025-11-27 22:52:26 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CA40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:26 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A2130>
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:52:24 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Nimukei%20Yosef%20on%20Kiddushin%202a'), (b'x-varnish', b'885100901'), (b'Age', b'0'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=DVBzgTigCh4OmhK%2F9WMu91dF8GLfs%2FPrfwAsaQDcL3jRwBgv9%2BkvboylK1VxrOK7Rgd8pRSIAjky6O7p8xsVyO4BCdsK5aSKKJzLxGJU"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e98f0bd742c6-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:26 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Nimukei%20Yosef%20on%20Kiddushin%202a "HTTP/1.1 404 Not Found"
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:26 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Nimukei Yosef on Kiddushin 2a'
2025-11-27 22:52:26 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Nimukei Yosef on Kiddushin 2a'
2025-11-27 22:52:26 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Nimukei Yosef on Kiddushin 2a"}
2025-11-27 22:52:26 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:26 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:26 | WARNING  | __main__:get_sources_from_claude:333 | Could not fetch text for Nimukei Yosef on Kiddushin 2a
2025-11-27 22:52:26 | INFO     | __main__:get_sources_from_claude:344 | STAGE 2: Analyzing 5 acharon texts to extract citations
2025-11-27 22:52:26 | DEBUG    | __main__:get_sources_from_claude:362 | Step 2 message length: 5657 characters
2025-11-27 22:52:26 | DEBUG    | anthropic._base_client:_build_request:493 | Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': Timeout(connect=5.0, read=600, write=600, pool=600), 'files': None, 'idempotency_key': 'stainless-python-retry-c7a26f64-9b81-4b83-83b5-85c9396139db', 'json_data': {'max_tokens': 2000, 'messages': [{'role': 'user', 'content': 'Topic: rav huna chuppas niddah rambam\nLevel: advanced - Include comprehensive coverage with multiple shittos - return 10-20 sources.\n\nSTEP 2: Below are texts from acharonim discussing this topic.\nExtract which EARLIER SOURCES they cite (ignore their lomdus).\nCount how many acharonim cite each source.\nReturn the sources cited by multiple acharonim as the \'ikkar\' of the sugya.\n\nAcharon texts:\n=== Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1 ===\nאין מוכרין ס"ת וכו\'. בש"ע בא"ח סימן קנ"ג פסק דמותר למכור ס"ת להספקת תלמידים או להשיא יתומים בדמיו והיא מדברי הריב"ש הביאו הב"י (שם בסי\' הנ"ל וסיים הריב"ש בדבריו) דהוי דומיא דללמוד תורה ולישא אשה ולפ"ז דוקא יתום שרוצה לקיים פ"ו ואין סיפוק בידו אבל בשביל יתומה אין מוכרין (דאשה אינה מצווה על פ"ו כדפסק בסי\' זה סעיף י"ג) ושאר פרטי דין זה אם אין לו מה לאכול או למצות פדיון שבוים וכן אם יש חילוק בין ס"ת של יחיד לשל רבים עיין בי"ד סי\' ר"ע וסי\' רפ"ב ובא"ח סי\' קנ"ג ואין כאן מקום להאריך בדין מכירת ס"ת: שישא אשה בן י"ח. אף על גב דכל המצות חייב לקיים מיד כשנעשה בן י"ג מ"מ מצוה זו קבלו חז"ל שבן י"ח לחופה מאחר שצריך ללמוד קודם שישא אשה (כמבואר בש"ע טי"ד סי\' רמ"ו סעיף ב\') התחלת למוד גמ\' הוא מבן ט"ו ואילך: אבל קודם י"ג לא ישא וכו\'. זה הוא לשון הטור, גם הרמב"ם בפכ"א מהא"ב כתב ואסור להשיא אשה לקטן שזה כמו זנות הוא ופשט הלשון משמע דקטן הוא כל שלא מלאו לו י"ג שנה ויום אחד ויש לו שערות כמו קטן דכל הש"ס ולפי זה סמוך לפרקן שהוא מצוה כדאמרינן בגמ\' (יבמות דס"ב סנהדרין דף ע"ו) (גם הרמב"ם הביאו בפ\' הנ"ל קודם דין ה\n\n=== Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1 ===\nחייב כל אדם לישא אשה. וחייב לבעול בכל עונה אפי\' שהרשת את בעלה שימנע עונתה חייב לבעול בכל עונה עד שיהי\' לו בנים כ"כ הרמב"ם פט"ו ה\' אישות וכן איתא לקמן סי\' ע"ו ומשמע אחר שיהיה לו בנים מהני רשות שלה אפי\' אם יכול להוליד וא"י מנ"ל לרמב"ם חילוק זה דמהני מחילה שלה אחר הקיום פו"ר ולא מהני קודם שקיים פו"ר דהא אפי\' אם קיים פו"ר מ"מ חייב לקיים לערב אל תנח ידך אף על גב דכתבתי בסמוך מצוה לערב אינו אלא מדרבנן, מ"מ מנ"ל דמהני מחילה שלה, וראיתי במגי"ד שכתב שם דלמד הרמב"ם מסוגיא פרק אעפ"י דמבעיא ליה בש"ס על מתני\' דתנא התלמידים יוצאים שלא ברשות ל\' יום ברשות כמה והשיב לו ברשות כמה דבעי ש"מ רשות מהני מיהו קשה א"כ למה לא מהני רשות שלה אפילו לא קיים פו"ר אלא ודאי הסוגיא לא איירי לבטל מצות פו"ר אם כן מנ"ל דמהני לבטל מצות לערב אל תנח דלמא איירי דהוא מקיים לערב אל תנח במקום שהולך אלא איירי דהיא יכולה למחול עונה שלה: אין מוכרין ס"ת אלא כדי ללמוד תורה. בכלל זה איתא הספקת תלמידים ובכלל לישא אשה איתא להשיא יתומים כמ"ש בא"ח סי\' קנ"ג ושאר ספרים נמי אסור למכור כמ"ש בי"ד סי\' ר"ע, וכתב בחלקת מחוקק דוקא משום מצות פריה ו\n\n=== Ran on Kiddushin 5a ===\nהב שדי דלא כפלה לדבורה מהו: תגא דמלכא אינה מקודשת. פירש רש"י ז"ל דלשון שבועה הוא ור"ח ז"ל פירש אפי\' נתן לה תגא דמלכא שהוא חשוב הרבה אינה מקודשת. ואיכא מ"ד דטעמא דאינה מקודשת משום דאדבורה קמא קא סמכא דקאמרה ליה מעיקרא הב שלא לשם קידושין אבל אי אמר לה איהו מעיקרא אי יהיבנא מיקדשת לי ואמרה הבה אי נמי הבה מיהבא כדאמר איהו קאמרה ומקודשת וכן נמי אפי\' היכא דאמרה איהי מעיקרא הב אם חזר ואמר לה בשעת נתינה התקדשי לי בו ואיהי אמרה הב או הבה מיהבא מקודשת אבל הרשב"א ז"ל סובר דאפי\' לא אמרה איהי מעיקרא מידי כיון דאיהו אמר בלשון שאלה אי יהיבנא לך מיקדשת לי ואיהי לא מהדרא ליה אין מקדשנא לך אלא אמרה ליה הב או הבה מיהבא אפי\' חזר ואמר לה הרי את מקודשת לי בזה לא מהני ולא מידי דעיקר טעמא דאינה מקודשת היינו משום דכיון דבלשון שאלה קאמר אם איתא דמרציא ליה הוה לה לאהדורי אין מקדשנא לך ומדלא מהדרא הכי אלא אמרה הבה מיהבא ודאי הכי קאמרה בקידושי לא ניחא לי אלא במתנה ולפיכך אם חזר ואמר התקדשי לי אינה מקודשת. [והאשר"י כתב כסברא ראשונה]: ונראה לי כל שלא אמר לה בלשונות האמורים בגמרא איכא לספוקי בלשון קדושין וצריכה גט שכ\n\n=== Rashba on Kiddushin 5a ===\nמה לכסף שכן פודין בו הקדשות ומעשרות אבל שטר אין פודין בו הקדשות. פירש רש"י ז"ל אם כתב שטר על מעות אין הקדש פדוי, דבעינן ונתן הכסף וקם לו. ואינו מחוור דבכי האי גוונא אפילו באשה אינה מקודשת, דאלו האומר לאשה הרי את מקודשת לי במנה ומחייב אני עצמי לך בשטר באותו מנה אינה מקודשת, דמנה אין כאן ושטר אין כאן, שהרי אינו מקדשה בשטר אלא במנה, ומנה אינו כן [ובעינן כי יקח איש כלומר בכסף]. וצריך עיון מההיא דכתב לכהן [חייב אני לך חמש סלעים דאינו פדוי]. דאפילו לכשיתן בקדושין (אם) [אינה] מקודשת, כיון שנתן לה לשם פרעון השטר ולא לשם קדושין של עכשיו וכדתנן בבכורות פרק יש בכור (בכורות נא, א) גבי פדיון הבן, ומייתינן לה בריש פרק הנושא את האשה (כתובות קב, א) כתב לכהן שהוא חייב לו ה\' סלעים חייב ליתן לו ה\' סלעים ובנו אינו פדוי, ואיתמר עלה אמר עולא דבר תורה בנו פדוי לכשיתן, ומה טעם אמרו אינו פדוי כדי שלא יאמרו פודין בשטרות, דאלמא אפילו דבר תורה אינו פדוי עכשיו אלא לכשיתן, והכא נמי אינה מקודשת עד שיתן, וההיא שעתא בכסף מתקדשת ולא בשטר. ומשום הכי נראה לי לפרש מה לשטר שכן אין פודין בו הקדשות, אם כתב בשטר הקדש זה פדוי \n\n=== Ritva on Kiddushin 5a ===\nומנין שאף בשטר והא דפריש ביאה מקמי שטר ולא נקיט שטר אחר כסף כסדורא דמתני\' משום דהכא מקראי דריש להו ונקט סדרא דקראי כי יקח והדר ובעלה והדר ויצאה והיתה: ודין הוא ומה כסף שאינו מוציא מכניס שטר שמוציא כלומר ויש בו כח דהיתרא להתיר האסור אינו דין שמכניס ויאסור המותר דהא ודאי כח דהיתרא עדיפא והקשה הראב"ד ז"ל אמאי לא אייתי לה בק"ו מאמה העבריה ולימא הכי ומה אמה העבריה שאינה נקנית בביאה נקנית בשטר מי שנקנית בביאה אינו דין שנקנית בשטר וכי מפריך ק"ו משום דאמה אינה נקנית לשם אישות אתי במה מצינו כדפרישנא לעיל. ומסתברא דלאו קושיא היא דאכתי איכא למיפרך מעיקרא דדינא כדפריך רב אשי לעיל מה לאמה העבריה שכן יוצאת בכסף ואע"ג דלעיל אתינן למילף כסף והשתא ילפינן שטר כיון דמה מצינו הוא שפיר איכא למימר שאין זו דומה לאמה ללמוד ממנה כיון שאמה יוצאה בכסף ואין זו יוצאה בכסף: מה לכסף שכן פודין בו הקדשות ומעשר שני. פי\' והוא ג"כ כחא דהיתרא משא"כ בשטר. וכי תימא ואי משום דכסף פודין בו הקדשות הוא שקונה כאן נימא דיו לבא מן הדין להיות כנדון ומה התם אין פודין מדין כסף בשטרות ועבדים וקרקעות אף הכא נמי אין אשה נקנית בהם ואלו א\n\nReturn final JSON with \'sources\' and \'summary\'.'}], 'model': 'claude-sonnet-4-20250514', 'system': 'You are a Torah scholar assistant that helps find marei mekomos (source references) for any Torah topic using a "sugya archaeology" approach.\n\nMETHODOLOGY - WORK BACKWARDS FROM ACHARONIM:\nInstead of guessing which sources are important, you will search through later commentaries (acharonim and late rishonim) to discover which earlier sources THEY cite most frequently. This reveals the true "ikkar" (foundation) of the sugya.\n\nSTEP 1 - IDENTIFY RELEVANT META-COMMENTARIES:\nBased on the topic, determine which acharonim/late rishonim would discuss it:\n\nFor Gemara topics:\n- Pnei Yehoshua (on most masechtos)\n- Rabbi Akiva Eiger\n- Late Rishonim who quote earlier sources: Ran, Ritva, Rashba, Nimukei Yosef\n\nFor Halachic topics (Orach Chaim/Yoreh Deah):\n- Mishnah Berurah\n- Shach, Taz\n- Beur Halacha\n\nFor Even HaEzer/Choshen Mishpat:\n- Ketzos HaChoshen, Nesivos HaMishpat\n- Chelkas Mechokek, Beis Shmuel\n\nFor Rambam:\n- Kesef Mishneh, Magid Mishneh, Lechem Mishneh\n\nAlways include:\n- Shulchan Aruch, Rama, Tur\n- Beis Yosef, Darchei Moshe\n\nSTEP 2 - SEARCH THESE SOURCES ON SEFARIA:\nReturn Sefaria references to WHERE these acharonim discuss this topic. For example:\n- "Pnei Yehoshua on Kiddushin 5a"\n- "Mishnah Berurah 431:1"\n- "Ketzos HaChoshen 201:1"\n\nSTEP 3 - IDENTIFY CITATION PATTERNS:\nYou will be given the TEXT of these acharonim. Your job is to:\n1. Extract which earlier sources they cite (ignore their lomdus/svara)\n2. Count how many times each source appears across multiple acharonim\n3. Prioritize sources cited by multiple acharonim - these are the ikkar!\n\nCRITICAL RULES:\n1. Use EXACT Sefaria reference formats\n2. DO NOT make up sources - only suggest what exists on Sefaria\n3. For Gemara: "Kiddushin 5a", "Berakhot 6b"\n4. For Chumash: "Shemot 12:15", "Bereishit 1:1"\n5. For Rishonim: "Rashi on Kiddushin 5a", "Tosafot on Kiddushin 5a"\n6. For Rambam: "Mishneh Torah, Ishut 10:2"\n7. For Shulchan Aruch: "Shulchan Arukh, Even HaEzer 55:1"\n\nRESPONSE FORMAT:\nReturn TWO JSON objects:\n\nFirst - the acharonim to search:\n{\n  "acharonim_to_search": [\n    {"ref": "Pnei Yehoshua on Kiddushin 5a", "category": "Acharonim"},\n    {"ref": "Ketzos HaChoshen 201:1", "category": "Acharonim"},\n    ...\n  ]\n}\n\nAfter analyzing their texts, return the final sources:\n{\n  "sources": [\n    {"ref": "Kiddushin 5a", "category": "Gemara", "citation_count": 5},\n    {"ref": "Rashi on Kiddushin 5a", "category": "Rishonim", "citation_count": 4},\n    ...\n  ],\n  "summary": "Brief summary of the sugya"\n}\n\nOnly return valid JSON, no other text.'}}
2025-11-27 22:52:26 | DEBUG    | anthropic._base_client:request:1045 | Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:trace:47 | send_request_headers.started request=<Request [b'POST']>
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:trace:47 | send_request_headers.complete
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:trace:47 | send_request_body.started request=<Request [b'POST']>
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:trace:47 | send_request_body.complete
2025-11-27 22:52:26 | DEBUG    | httpcore.http11:trace:47 | receive_response_headers.started request=<Request [b'POST']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:trace:47 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:37 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'26000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-11-28T03:52:34Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-11-28T03:52:42Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-11-28T03:52:25Z'), (b'retry-after', b'34'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'33000'), (b'anthropic-ratelimit-tokens-reset', b'2025-11-28T03:52:34Z'), (b'request-id', b'req_011CVZcGuQi6yviynp1c4xr4'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'73a09491-cda3-40b4-8544-d00ca1bc9331'), (b'x-envoy-upstream-service-time', b'12987'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9a56e98f7d379608-EWR')])
2025-11-27 22:52:39 | INFO     | httpx:_send_single_request:1025 | HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:trace:47 | receive_response_body.started request=<Request [b'POST']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:trace:47 | receive_response_body.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:trace:47 | response_closed.started
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:trace:47 | response_closed.complete
2025-11-27 22:52:39 | DEBUG    | anthropic._base_client:request:1083 | HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 28 Nov 2025 03:52:37 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '26000', 'anthropic-ratelimit-input-tokens-reset': '2025-11-28T03:52:34Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2025-11-28T03:52:42Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-11-28T03:52:25Z', 'retry-after': '34', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '33000', 'anthropic-ratelimit-tokens-reset': '2025-11-28T03:52:34Z', 'request-id': 'req_011CVZcGuQi6yviynp1c4xr4', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '73a09491-cda3-40b4-8544-d00ca1bc9331', 'x-envoy-upstream-service-time': '12987', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9a56e98f7d379608-EWR'})
2025-11-27 22:52:39 | DEBUG    | anthropic._base_client:request:1091 | request_id: req_011CVZcGuQi6yviynp1c4xr4
2025-11-27 22:52:39 | DEBUG    | __main__:get_sources_from_claude:371 | Claude Step 2 response received. Usage: Usage(cache_creation=CacheCreation(ephemeral_1h_input_tokens=0, ephemeral_5m_input_tokens=0), cache_creation_input_tokens=0, cache_read_input_tokens=0, input_tokens=4900, output_tokens=697, server_tool_use=None, service_tier='standard')
2025-11-27 22:52:39 | DEBUG    | __main__:get_sources_from_claude:377 | Step 2 response length: 1845 characters
2025-11-27 22:52:39 | DEBUG    | __main__:parse_claude_json:436 | Extracting JSON from markdown json fence
2025-11-27 22:52:39 | DEBUG    | __main__:parse_claude_json:457 | Successfully parsed JSON
2025-11-27 22:52:39 | INFO     | __main__:get_sources_from_claude:384 | Successfully extracted 15 sources from acharon analysis
2025-11-27 22:52:39 | DEBUG    | cache_manager:set:87 | Cache DISABLED - not saving
2025-11-27 22:52:39 | DEBUG    | __main__:get_sources_from_claude:388 | Saved final result to cache
2025-11-27 22:52:39 | INFO     | __main__:search_sources:597 | Claude suggested 15 sources (before Sefaria lookup)
2025-11-27 22:52:39 | DEBUG    | __main__:search_sources:598 | Suggested sources: [{'ref': 'Kiddushin 5a', 'category': 'Gemara', 'citation_count': 4}, {'ref': 'Rashi on Kiddushin 5a', 'category': 'Rishonim', 'citation_count': 2}, {'ref': 'Mishneh Torah, Ishut 15:1', 'category': 'Rishonim', 'citation_count': 2}, {'ref': 'Mishneh Torah, Ishut 21:1', 'category': 'Rishonim', 'citation_count': 2}, {'ref': 'Yevamot 62b', 'category': 'Gemara', 'citation_count': 1}, {'ref': 'Sanhedrin 76a', 'category': 'Gemara', 'citation_count': 1}, {'ref': 'Shulchan Arukh, Orach Chaim 153:1', 'category': 'Acharonim', 'citation_count': 1}, {'ref': 'Shulchan Arukh, Yoreh Deah 270:1', 'category': 'Acharonim', 'citation_count': 1}, {'ref': 'Shulchan Arukh, Yoreh Deah 282:1', 'category': 'Acharonim', 'citation_count': 1}, {'ref': 'Shulchan Arukh, Even HaEzer 76:1', 'category': 'Acharonim', 'citation_count': 1}, {'ref': 'Tur, Even HaEzer 61:1', 'category': 'Rishonim', 'citation_count': 1}, {'ref': 'Ketubot 102a', 'category': 'Gemara', 'citation_count': 1}, {'ref': 'Bekhorot 51a', 'category': 'Gemara', 'citation_count': 1}, {'ref': 'Rivash', 'category': 'Rishonim', 'citation_count': 1}, {'ref': 'Rashba on Kiddushin 5a', 'category': 'Rishonim', 'citation_count': 1}]
2025-11-27 22:52:39 | INFO     | __main__:search_sources:614 | [1/15] Looking up: 'Kiddushin 5a' (category: Gemara)
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Kiddushin 5a'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Kiddushin%205a
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35EA580>
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347C9C0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FE3D0>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:37 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Kiddushin%205a'), (b'x-varnish', b'877340181 868913865'), (b'Age', b'1427'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=smzowiLVtVM0MnOUxnLrNN2GQANzai0xU8A4OWu3jMYDatrrVOEZoxoXwo1QvrC52EGywAY1Q9uUTrBWW8ks3EMfoqDSBrljD4oAoVK%2B"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9e14d168c6d-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:39 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Kiddushin%205a "HTTP/1.1 200 OK"
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Kiddushin 5a'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Kiddushin 5a'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=William Davidson Edition - Vocalized Aramaic, text_type=list
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 2864 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 2864 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 2864 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Kiddushin 5a': he_text=yes en_text=no
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:39 | INFO     | __main__:search_sources:620 | [1/15] Sefaria lookup result for 'Kiddushin 5a': found=True
2025-11-27 22:52:39 | DEBUG    | __main__:search_sources:632 | Added source: Kiddushin 5a, has_he=True, has_en=False
2025-11-27 22:52:39 | INFO     | __main__:search_sources:614 | [2/15] Looking up: 'Rashi on Kiddushin 5a' (category: Rishonim)
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Rashi on Kiddushin 5a'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Rashi%20on%20Kiddushin%205a
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C358DAF0>
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CDC0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35F7A00>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:37 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Rashi%20on%20Kiddushin%205a'), (b'x-varnish', b'872190949 856992476'), (b'Age', b'1426'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=U9N6A2yLGL2nnfVOEk%2BWEFWRTTOgHsMbfs4UrW22KJfgf3zudFbDPXS6TuuU0gV6jWxa94%2FIYZekMNZQuALq8wOeUJ0kwYpmp9DF7%2BcR"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9e23c1de55d-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:39 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Rashi%20on%20Kiddushin%205a "HTTP/1.1 200 OK"
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Rashi on Kiddushin 5a'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Rashi on Kiddushin 5a'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Vilna Edition, text_type=list
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 103 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 172 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 35 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 73 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 54 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 138 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 85 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 423 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 35 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 93 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 41 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 100 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 52 characters
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 1422 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 1422 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 1416 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Rashi on Kiddushin 5a': he_text=yes en_text=no
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:39 | INFO     | __main__:search_sources:620 | [2/15] Sefaria lookup result for 'Rashi on Kiddushin 5a': found=True
2025-11-27 22:52:39 | DEBUG    | __main__:search_sources:632 | Added source: Rashi on Kiddushin 5a, has_he=True, has_en=False
2025-11-27 22:52:39 | INFO     | __main__:search_sources:614 | [3/15] Looking up: 'Mishneh Torah, Ishut 15:1' (category: Rishonim)
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Mishneh Torah, Ishut 15:1'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Mishneh%20Torah,%20Ishut%2015:1
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FCB20>
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CE40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FCA00>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:37 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Mishneh%20Torah,%20Ishut%2015:1'), (b'x-varnish', b'855579072'), (b'Age', b'0'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=IqTbbtV8FeH9ft5mMzkTpSA8H53I7ohRvrkKsRbOuQ8z8UKPm5s1rx4Z%2BOAZFK23ThxnKUNHC2me5hktAMoV0NWuWlqOezVCVQSbfyeG"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9e2dfb97c81-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:39 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Mishneh%20Torah,%20Ishut%2015:1 "HTTP/1.1 200 OK"
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Mishneh Torah, Ishut 15:1'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Mishneh Torah, Ishut 15:1'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Torat Emet 363, text_type=str
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 373 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 356 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Mishneh Torah, Ishut 15:1': he_text=yes en_text=no
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:39 | INFO     | __main__:search_sources:620 | [3/15] Sefaria lookup result for 'Mishneh Torah, Ishut 15:1': found=True
2025-11-27 22:52:39 | DEBUG    | __main__:search_sources:632 | Added source: Mishneh Torah, Ishut 15:1, has_he=True, has_en=False
2025-11-27 22:52:39 | INFO     | __main__:search_sources:614 | [4/15] Looking up: 'Mishneh Torah, Ishut 21:1' (category: Rishonim)
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Mishneh Torah, Ishut 21:1'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Mishneh%20Torah,%20Ishut%2021:1
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A8070>
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C35AEAC0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A5DC0>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:37 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Mishneh%20Torah,%20Ishut%2021:1'), (b'x-varnish', b'877501753'), (b'Age', b'0'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=AZikSbZWpP5HVZEmmCJywpJbAvLjuFz%2BSTeCuRn3liNXaaqatZvecAAIFua1dW0S5c%2FYwiFIlWvp7MTP5abkF6%2FUW7nXDjlbTasOcJPE"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9e3cdd56e28-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:39 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Mishneh%20Torah,%20Ishut%2021:1 "HTTP/1.1 200 OK"
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Mishneh Torah, Ishut 21:1'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Mishneh Torah, Ishut 21:1'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Torat Emet 363, text_type=str
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 520 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 503 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Mishneh Torah, Ishut 21:1': he_text=yes en_text=no
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:39 | INFO     | __main__:search_sources:620 | [4/15] Sefaria lookup result for 'Mishneh Torah, Ishut 21:1': found=True
2025-11-27 22:52:39 | DEBUG    | __main__:search_sources:632 | Added source: Mishneh Torah, Ishut 21:1, has_he=True, has_en=False
2025-11-27 22:52:39 | INFO     | __main__:search_sources:614 | [5/15] Looking up: 'Yevamot 62b' (category: Gemara)
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Yevamot 62b'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Yevamot%2062b
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A5E50>
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C358C8C0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A5EE0>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:37 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Yevamot%2062b'), (b'x-varnish', b'869962677 885949211'), (b'Age', b'1488'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=YXdApCqOE%2F9bkZBKuzdEkn9fGgfQ%2Fo9ORDI21faX0eX%2B%2BOdr%2BFHphAMIMW5Ht3y%2Fa9LIpiaEYSpXPGZuOVKc%2BaglRvDiKo1R5clxsfNM"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9e4bd97847d-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:39 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Yevamot%2062b "HTTP/1.1 200 OK"
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Yevamot 62b'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Yevamot 62b'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=William Davidson Edition - Vocalized Aramaic, text_type=list
2025-11-27 22:52:39 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 4092 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 4092 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 4092 characters
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Yevamot 62b': he_text=yes en_text=no
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:39 | INFO     | __main__:search_sources:620 | [5/15] Sefaria lookup result for 'Yevamot 62b': found=True
2025-11-27 22:52:39 | DEBUG    | __main__:search_sources:632 | Added source: Yevamot 62b, has_he=True, has_en=False
2025-11-27 22:52:39 | INFO     | __main__:search_sources:614 | [6/15] Looking up: 'Sanhedrin 76a' (category: Gemara)
2025-11-27 22:52:39 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Sanhedrin 76a'
2025-11-27 22:52:39 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Sanhedrin%2076a
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FA310>
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C358C940> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:39 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A5E20>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:39 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:38 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Sanhedrin%2076a'), (b'x-varnish', b'862065757 878321991'), (b'Age', b'1486'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=g2b%2FzkPVfvb3KqZ%2FzF7rcbzs3fae5SOieNem0bTyGodM9GuTNMyrCC2anVoaOMnXiMihyWzHpkEuWXoFUxUjw1niMgIX1nS5usCTZU%2B2"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9e5982c9a1a-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:40 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Sanhedrin%2076a "HTTP/1.1 200 OK"
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Sanhedrin 76a'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Sanhedrin 76a'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=William Davidson Edition - Vocalized Aramaic, text_type=list
2025-11-27 22:52:40 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 27 items -> 4049 characters
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 4049 characters
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 4049 characters
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Sanhedrin 76a': he_text=yes en_text=no
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:40 | INFO     | __main__:search_sources:620 | [6/15] Sefaria lookup result for 'Sanhedrin 76a': found=True
2025-11-27 22:52:40 | DEBUG    | __main__:search_sources:632 | Added source: Sanhedrin 76a, has_he=True, has_en=False
2025-11-27 22:52:40 | INFO     | __main__:search_sources:614 | [7/15] Looking up: 'Shulchan Arukh, Orach Chaim 153:1' (category: Acharonim)
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Shulchan Arukh, Orach Chaim 153:1'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Shulchan%20Arukh,%20Orach%20Chaim%20153:1
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C358F130>
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C358C6C0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FCF10>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:52:38 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Shulchan%20Arukh,%20Orach%20Chaim%20153:1'), (b'x-varnish', b'884252937'), (b'Age', b'0'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=U0P8zisz6svT4mVLrc7fZqt9uy4mhG2mLcLA3H%2FD6CSLCVv9RBQkX4CeNohoEfaLf%2FJRKmRygUuC30itniJ1G8sQW1M3ICBlqlETft3S"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9e69903be78-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:40 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Shulchan%20Arukh,%20Orach%20Chaim%20153:1 "HTTP/1.1 404 Not Found"
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Shulchan Arukh, Orach Chaim 153:1'
2025-11-27 22:52:40 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Shulchan Arukh, Orach Chaim 153:1'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Shulchan Arukh, Orach Chaim 153.1"}
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:40 | INFO     | __main__:search_sources:620 | [7/15] Sefaria lookup result for 'Shulchan Arukh, Orach Chaim 153:1': found=False
2025-11-27 22:52:40 | DEBUG    | __main__:search_sources:632 | Added source: Shulchan Arukh, Orach Chaim 153:1, has_he=False, has_en=False
2025-11-27 22:52:40 | INFO     | __main__:search_sources:614 | [8/15] Looking up: 'Shulchan Arukh, Yoreh Deah 270:1' (category: Acharonim)
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Shulchan Arukh, Yoreh Deah 270:1'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Shulchan%20Arukh,%20Yoreh%20Deah%20270:1
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35F7FD0>
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C358C440> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35F7F70>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:38 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Shulchan%20Arukh,%20Yoreh%20Deah%20270:1'), (b'x-varnish', b'885822075'), (b'Age', b'0'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=ih4Vtc8eb2soLnccZeKV%2FCHaU906umk8qxhaImIaY%2FNYLgEo%2Fr%2BHRy7SJP9DKbBoei8%2FpRTnMmMslyV2EPSwoU8REThq0Q0ZT1zhXg%3D%3D"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9e778abf21e-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:40 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Shulchan%20Arukh,%20Yoreh%20Deah%20270:1 "HTTP/1.1 200 OK"
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Shulchan Arukh, Yoreh Deah 270:1'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Shulchan Arukh, Yoreh Deah 270:1'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Ashlei Ravrevei: Shulchan Aruch Yoreh Deah, Lemberg, 1888, text_type=str
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 2289 characters
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 616 characters
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Shulchan Arukh, Yoreh Deah 270:1': he_text=yes en_text=no
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:40 | INFO     | __main__:search_sources:620 | [8/15] Sefaria lookup result for 'Shulchan Arukh, Yoreh Deah 270:1': found=True
2025-11-27 22:52:40 | DEBUG    | __main__:search_sources:632 | Added source: Shulchan Arukh, Yoreh Deah 270:1, has_he=True, has_en=False
2025-11-27 22:52:40 | INFO     | __main__:search_sources:614 | [9/15] Looking up: 'Shulchan Arukh, Yoreh Deah 282:1' (category: Acharonim)
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Shulchan Arukh, Yoreh Deah 282:1'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Shulchan%20Arukh,%20Yoreh%20Deah%20282:1
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35BF370>
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C35AEC40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C344DF40>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:38 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Shulchan%20Arukh,%20Yoreh%20Deah%20282:1'), (b'x-varnish', b'855579080'), (b'Age', b'0'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=qdLEr08dkN5M7hZruYabY%2FawlyJFQGNOwjC14Tlr%2FpHk4Xa4M4g4pQwvUezLafRvUNN2k%2BcLTEL7UTmbn6guwL%2FTPiAXGPxDst1mkJN3"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9e8ec2a4264-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:40 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Shulchan%20Arukh,%20Yoreh%20Deah%20282:1 "HTTP/1.1 200 OK"
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Shulchan Arukh, Yoreh Deah 282:1'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Shulchan Arukh, Yoreh Deah 282:1'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Ashlei Ravrevei: Shulchan Aruch Yoreh Deah, Lemberg, 1888, text_type=str
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 1024 characters
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 376 characters
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Shulchan Arukh, Yoreh Deah 282:1': he_text=yes en_text=no
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:40 | INFO     | __main__:search_sources:620 | [9/15] Sefaria lookup result for 'Shulchan Arukh, Yoreh Deah 282:1': found=True
2025-11-27 22:52:40 | DEBUG    | __main__:search_sources:632 | Added source: Shulchan Arukh, Yoreh Deah 282:1, has_he=True, has_en=False
2025-11-27 22:52:40 | INFO     | __main__:search_sources:614 | [10/15] Looking up: 'Shulchan Arukh, Even HaEzer 76:1' (category: Acharonim)
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Shulchan Arukh, Even HaEzer 76:1'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Shulchan%20Arukh,%20Even%20HaEzer%2076:1
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A25B0>
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C35AEF40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FE490>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:38 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Shulchan%20Arukh,%20Even%20HaEzer%2076:1'), (b'x-varnish', b'862820785'), (b'Age', b'0'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=Gm8azcaIIZadWW6PqzLUbF2wDEXSztntLM4mTRAtaQJarOJqXUUxdMx7X21VMn6JygaPwc6IC%2BDU1dtB0wJMVMNjlgWljOmqJeXqjkgH"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9ea6bb64269-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:40 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Shulchan%20Arukh,%20Even%20HaEzer%2076:1 "HTTP/1.1 200 OK"
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Shulchan Arukh, Even HaEzer 76:1'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Shulchan Arukh, Even HaEzer 76:1'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Apei Ravrevei: Shulchan Aruch Even HaEzer, Lemberg, 1886, text_type=str
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 578 characters
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 98 characters
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Shulchan Arukh, Even HaEzer 76:1': he_text=yes en_text=no
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:40 | INFO     | __main__:search_sources:620 | [10/15] Sefaria lookup result for 'Shulchan Arukh, Even HaEzer 76:1': found=True
2025-11-27 22:52:40 | DEBUG    | __main__:search_sources:632 | Added source: Shulchan Arukh, Even HaEzer 76:1, has_he=True, has_en=False
2025-11-27 22:52:40 | INFO     | __main__:search_sources:614 | [11/15] Looking up: 'Tur, Even HaEzer 61:1' (category: Rishonim)
2025-11-27 22:52:40 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Tur, Even HaEzer 61:1'
2025-11-27 22:52:40 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Tur,%20Even%20HaEzer%2061:1
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37AFC10>
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C35AEB40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FFEB0>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:39 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Tur,%20Even%20HaEzer%2061:1'), (b'x-varnish', b'885822100'), (b'Age', b'0'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=fSJK22dB6p6EI7gc9UfKG9yc83KZuKoU6thQDFMBk2DeJsAq1pUoyRsY75FrLuQE5B4GTWliVsR6lQAsOoMfTTklS2hhtsx0iY9MuFg8"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9eb8e9341af-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:41 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Tur,%20Even%20HaEzer%2061:1 "HTTP/1.1 200 OK"
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Tur, Even HaEzer 61:1'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Tur, Even HaEzer 61:1'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Even HaEzer, Vilna, 1923, text_type=str
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 1495 characters
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 651 characters
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Tur, Even HaEzer 61:1': he_text=yes en_text=no
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:41 | INFO     | __main__:search_sources:620 | [11/15] Sefaria lookup result for 'Tur, Even HaEzer 61:1': found=True
2025-11-27 22:52:41 | DEBUG    | __main__:search_sources:632 | Added source: Tur, Even HaEzer 61:1, has_he=True, has_en=False
2025-11-27 22:52:41 | INFO     | __main__:search_sources:614 | [12/15] Looking up: 'Ketubot 102a' (category: Gemara)
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Ketubot 102a'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Ketubot%20102a
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37B4910>
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C35AEEC0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37B4B50>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:39 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Ketubot%20102a'), (b'x-varnish', b'885101043 859449710'), (b'Age', b'1159'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=QuPlxEfbj881g2cDPbXvjxoOHVmLhEUd%2FGfzMlrpqd6u1f9T6k3lNbx2pojXb7XVAkLXJs9YTqUYDyZ5YPg4uCv%2Fk8w9bSb%2BlR%2BYl1aY"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9ed9d51b734-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:41 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Ketubot%20102a "HTTP/1.1 200 OK"
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Ketubot 102a'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Ketubot 102a'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=William Davidson Edition - Vocalized Aramaic, text_type=list
2025-11-27 22:52:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 1336 characters
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 1336 characters
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 1336 characters
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Ketubot 102a': he_text=yes en_text=no
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:41 | INFO     | __main__:search_sources:620 | [12/15] Sefaria lookup result for 'Ketubot 102a': found=True
2025-11-27 22:52:41 | DEBUG    | __main__:search_sources:632 | Added source: Ketubot 102a, has_he=True, has_en=False
2025-11-27 22:52:41 | INFO     | __main__:search_sources:614 | [13/15] Looking up: 'Bekhorot 51a' (category: Gemara)
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Bekhorot 51a'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Bekhorot%2051a
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C34C3850>
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CCC0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FF310>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:39 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Bekhorot%2051a'), (b'x-varnish', b'884252960 859449704'), (b'Age', b'1159'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=zR3adcnv1TniIEDVSqFbJj%2FEx21kVsj0KlOumi%2FJLTW2kA2T3f%2F35fs%2Fbku%2FwL8GYPBeQFgSDqjr9gHcPbmkVoseoLslhZO2CNx1c55W"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9ee891cd218-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:41 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Bekhorot%2051a "HTTP/1.1 200 OK"
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Bekhorot 51a'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Bekhorot 51a'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=William Davidson Edition - Vocalized Aramaic, text_type=list
2025-11-27 22:52:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 20 items -> 3081 characters
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 3081 characters
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 3053 characters
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Bekhorot 51a': he_text=yes en_text=no
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:41 | INFO     | __main__:search_sources:620 | [13/15] Sefaria lookup result for 'Bekhorot 51a': found=True
2025-11-27 22:52:41 | DEBUG    | __main__:search_sources:632 | Added source: Bekhorot 51a, has_he=True, has_en=False
2025-11-27 22:52:41 | INFO     | __main__:search_sources:614 | [14/15] Looking up: 'Rivash' (category: Rishonim)
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Rivash'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Rivash
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35BF9A0>
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347C940> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FE940>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:52:39 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Rivash'), (b'x-varnish', b'884252962 872850882'), (b'Age', b'1428'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=BBf36ZLuGMu%2Bne%2FzwXKDHpSaCHuOVuyu%2Brp8w146HrJ8rTlPv0NzresG3QXTgdiULUyH%2FxgBFAGGcEOU%2B7Ic7FwYpW5E1vn0T38ChlN%2F"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9ef6b104b9f-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:41 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Rivash "HTTP/1.1 404 Not Found"
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Rivash'
2025-11-27 22:52:41 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Rivash'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Rivash"}
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:41 | INFO     | __main__:search_sources:620 | [14/15] Sefaria lookup result for 'Rivash': found=False
2025-11-27 22:52:41 | DEBUG    | __main__:search_sources:632 | Added source: Rivash, has_he=False, has_en=False
2025-11-27 22:52:41 | INFO     | __main__:search_sources:614 | [15/15] Looking up: 'Rashba on Kiddushin 5a' (category: Rishonim)
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Rashba on Kiddushin 5a'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Rashba%20on%20Kiddushin%205a
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C358D790>
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CD40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35F7760>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:52:39 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Rashba%20on%20Kiddushin%205a'), (b'x-varnish', b'872190962 881136125'), (b'Age', b'1167'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=DQrXfvLgOmVmTgOM06L526ojelSIMLo96ghGy%2BZPFhm7INFm%2BPMEhnYNsb7g8V%2F3dsbrJXWdnjFw8JSBAdRXirjcJVcp9776VCdIuaBr"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56e9f0096631cb-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:52:41 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Rashba%20on%20Kiddushin%205a "HTTP/1.1 200 OK"
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:52:41 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Rashba on Kiddushin 5a'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Rashba on Kiddushin 5a'
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Gerlitz edition, published by Oraita, text_type=list
2025-11-27 22:52:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 5186 characters
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 5186 characters
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 5107 characters
2025-11-27 22:52:41 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:52:41 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Rashba on Kiddushin 5a': he_text=yes en_text=no
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:52:41 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:52:41 | INFO     | __main__:search_sources:620 | [15/15] Sefaria lookup result for 'Rashba on Kiddushin 5a': found=True
2025-11-27 22:52:41 | DEBUG    | __main__:search_sources:632 | Added source: Rashba on Kiddushin 5a, has_he=True, has_en=False
2025-11-27 22:52:41 | WARNING  | __main__:search_sources:640 | Filtered out 2 invalid/unfound sources
2025-11-27 22:52:41 | DEBUG    | __main__:search_sources:642 | Invalid references: ['Shulchan Arukh, Orach Chaim 153:1', 'Rivash']
2025-11-27 22:52:41 | INFO     | __main__:search_sources:644 | ================================================================================
2025-11-27 22:52:41 | INFO     | __main__:search_sources:645 | Request complete: Returning 13 valid sources to client
2025-11-27 22:52:41 | INFO     | __main__:search_sources:646 | ================================================================================
2025-11-27 22:56:30 | INFO     | __main__:search_sources:583 | ================================================================================
2025-11-27 22:56:30 | INFO     | __main__:search_sources:584 | POST /search -> topic='rav huna chuppas niddah rambam' level='intermediate'
2025-11-27 22:56:30 | INFO     | __main__:search_sources:585 | ================================================================================
2025-11-27 22:56:30 | DEBUG    | cache_manager:get:52 | Cache DISABLED (via USE_CACHE env var)
2025-11-27 22:56:30 | INFO     | __main__:get_sources_from_claude:215 | STAGE 0: Interpreting query 'rav huna chuppas niddah rambam'
2025-11-27 22:56:30 | DEBUG    | anthropic._base_client:_build_request:493 | Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': Timeout(connect=5.0, read=600, write=600, pool=600), 'files': None, 'idempotency_key': 'stainless-python-retry-9a5b4b0e-bddf-4dbc-9d7d-048a7ca6c3c5', 'json_data': {'max_tokens': 500, 'messages': [{'role': 'user', 'content': 'The user searched for: "rav huna chuppas niddah rambam"\n\nThis might be a shorthand query that needs interpretation. Your job is to figure out what they\'re REALLY asking about.\n\nExamples:\n- "rav huna chuppas niddah rambam" → They want sources about whether chuppah creates kiddushin when the woman is a niddah (Rav Huna\'s position and Rambam\'s ruling in Hilchos Ishut, NOT Issurei Biah)\n- "bedikas chometz" → They want sources about the obligation to search for chometz before Pesach (Orach Chaim)  \n- "kibud av" → They want sources about the mitzvah to honor parents (Yoreh Deah)\n\nThink carefully about:\n1. What is the MAIN TOPIC? (e.g., kiddushin/marriage, chometz, kibud av)\n2. What SPECIFIC ASPECT? (e.g., chuppah as kinyan, bedikah obligation, honoring father)\n3. Which seforim/chapters would discuss this? (Be precise - Hilchos Ishut vs. Issurei Biah matters!)\n4. Are specific people/positions mentioned? (e.g., Rav Huna, Rambam, Rashi)\n\nCRITICAL: Don\'t get confused by keywords! "chuppas niddah" is about KIDDUSHIN (marriage), not about niddah laws.\n\nReturn ONLY a JSON object:\n{\n  "interpreted_query": "A clear, detailed description of what the user is asking",\n  "main_topic": "The primary subject area",\n  "relevant_areas": ["Specific Rambam chapters, SA sections, or masechtos"],\n  "specific_question": "The exact question or case being asked about"\n}\n'}], 'model': 'claude-sonnet-4-20250514', 'system': "You are a Torah scholar who interprets user queries to understand what they're really asking about. Pay close attention to context, not just keywords."}}
2025-11-27 22:56:30 | DEBUG    | anthropic._base_client:request:1045 | Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-11-27 22:56:30 | DEBUG    | httpcore.connection:trace:47 | close.started
2025-11-27 22:56:30 | DEBUG    | httpcore.connection:trace:47 | close.complete
2025-11-27 22:56:30 | DEBUG    | httpcore.connection:trace:47 | connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=5.0 socket_options=[(65535, 8, True), (6, 17, 60), (6, 16, 5), (6, 3, 60)]
2025-11-27 22:56:30 | DEBUG    | httpcore.connection:trace:47 | connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000172C35EAFA0>
2025-11-27 22:56:30 | DEBUG    | httpcore.connection:trace:47 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C31EECC0> server_hostname='api.anthropic.com' timeout=5.0
2025-11-27 22:56:30 | DEBUG    | httpcore.connection:trace:47 | start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000172C35EA6D0>
2025-11-27 22:56:30 | DEBUG    | httpcore.http11:trace:47 | send_request_headers.started request=<Request [b'POST']>
2025-11-27 22:56:30 | DEBUG    | httpcore.http11:trace:47 | send_request_headers.complete
2025-11-27 22:56:30 | DEBUG    | httpcore.http11:trace:47 | send_request_body.started request=<Request [b'POST']>
2025-11-27 22:56:30 | DEBUG    | httpcore.http11:trace:47 | send_request_body.complete
2025-11-27 22:56:30 | DEBUG    | httpcore.http11:trace:47 | receive_response_headers.started request=<Request [b'POST']>
2025-11-27 22:56:35 | DEBUG    | httpcore.http11:trace:47 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:33 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'30000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-11-28T03:56:30Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-11-28T03:56:35Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-11-28T03:56:30Z'), (b'retry-after', b'30'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'38000'), (b'anthropic-ratelimit-tokens-reset', b'2025-11-28T03:56:30Z'), (b'request-id', b'req_011CVZcaw2T3HqJjj2Rp3JZs'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'73a09491-cda3-40b4-8544-d00ca1bc9331'), (b'x-envoy-upstream-service-time', b'4812'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9a56ef87fdd2db6d-EWR')])
2025-11-27 22:56:35 | INFO     | httpx:_send_single_request:1025 | HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-11-27 22:56:35 | DEBUG    | httpcore.http11:trace:47 | receive_response_body.started request=<Request [b'POST']>
2025-11-27 22:56:35 | DEBUG    | httpcore.http11:trace:47 | receive_response_body.complete
2025-11-27 22:56:35 | DEBUG    | httpcore.http11:trace:47 | response_closed.started
2025-11-27 22:56:35 | DEBUG    | httpcore.http11:trace:47 | response_closed.complete
2025-11-27 22:56:35 | DEBUG    | anthropic._base_client:request:1083 | HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 28 Nov 2025 03:56:33 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '30000', 'anthropic-ratelimit-input-tokens-reset': '2025-11-28T03:56:30Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-11-28T03:56:35Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-11-28T03:56:30Z', 'retry-after': '30', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '38000', 'anthropic-ratelimit-tokens-reset': '2025-11-28T03:56:30Z', 'request-id': 'req_011CVZcaw2T3HqJjj2Rp3JZs', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '73a09491-cda3-40b4-8544-d00ca1bc9331', 'x-envoy-upstream-service-time': '4812', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9a56ef87fdd2db6d-EWR'})
2025-11-27 22:56:35 | DEBUG    | anthropic._base_client:request:1091 | request_id: req_011CVZcaw2T3HqJjj2Rp3JZs
2025-11-27 22:56:35 | DEBUG    | __main__:parse_claude_json:436 | Extracting JSON from markdown json fence
2025-11-27 22:56:35 | DEBUG    | __main__:parse_claude_json:457 | Successfully parsed JSON
2025-11-27 22:56:35 | INFO     | __main__:get_sources_from_claude:252 | ✓ Interpreted query as: The user wants sources about Rav Huna's position regarding whether chuppah (marriage canopy) can effect kiddushin when the woman is in a state of niddah, and how the Rambam rules on this matter in hilchos marriage
2025-11-27 22:56:35 | DEBUG    | __main__:get_sources_from_claude:253 | Full interpretation: {'interpreted_query': "The user wants sources about Rav Huna's position regarding whether chuppah (marriage canopy) can effect kiddushin when the woman is in a state of niddah, and how the Rambam rules on this matter in hilchos marriage", 'main_topic': 'Kiddushin and marriage laws - specifically the validity of chuppah as a kinyan kiddushin', 'relevant_areas': ['Rambam Hilchos Ishut', 'Masechet Kiddushin', 'Shulchan Aruch Even HaEzer'], 'specific_question': "Does chuppah create valid kiddushin when the bride is a niddah, according to Rav Huna's view and the Rambam's final ruling"}
2025-11-27 22:56:35 | INFO     | __main__:get_sources_from_claude:261 | STAGE 1: Requesting acharonim to search
2025-11-27 22:56:35 | DEBUG    | __main__:get_sources_from_claude:287 | Step 1 message to Claude: User's original query: "rav huna chuppas niddah rambam"

INTERPRETED QUERY: The user wants sources about Rav Huna's position regarding whether chuppah (marriage canopy) can effect kiddushin when the woman is in a state of niddah, and how the Rambam rules on this matter in hilchos marriage

Level: intermediate - Include the main sugya and key rishonim - return 5-15 sources.

STEP 1: Based on the INTERPRETED QUERY above, identify which acharonim and late rishonim on Sefaria would discuss THIS SPECIFIC TOPIC.

Return a JSON object with 'acharonim_to_search' containing 5-10 relevant sources.

CRITICAL REMINDERS:
- Use the INTERPRETED QUERY to understand what the user wants
- Be specific about WHERE in each acharon (e.g., 'Pnei Yehoshua on Kiddushin 5a', not just 'Pnei Yehoshua')
- Don't be fooled by keywords - understand the actual topic (e.g., 'chuppas niddah' is about kiddushin, not niddah laws)
- Choose acharonim that discuss the SPECIFIC QUESTION asked, not just the general topic
2025-11-27 22:56:35 | DEBUG    | anthropic._base_client:_build_request:493 | Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': Timeout(connect=5.0, read=600, write=600, pool=600), 'files': None, 'idempotency_key': 'stainless-python-retry-96ec09b8-22d6-4bc3-8252-6291d15e5701', 'json_data': {'max_tokens': 1500, 'messages': [{'role': 'user', 'content': 'User\'s original query: "rav huna chuppas niddah rambam"\n\nINTERPRETED QUERY: The user wants sources about Rav Huna\'s position regarding whether chuppah (marriage canopy) can effect kiddushin when the woman is in a state of niddah, and how the Rambam rules on this matter in hilchos marriage\n\nLevel: intermediate - Include the main sugya and key rishonim - return 5-15 sources.\n\nSTEP 1: Based on the INTERPRETED QUERY above, identify which acharonim and late rishonim on Sefaria would discuss THIS SPECIFIC TOPIC.\n\nReturn a JSON object with \'acharonim_to_search\' containing 5-10 relevant sources.\n\nCRITICAL REMINDERS:\n- Use the INTERPRETED QUERY to understand what the user wants\n- Be specific about WHERE in each acharon (e.g., \'Pnei Yehoshua on Kiddushin 5a\', not just \'Pnei Yehoshua\')\n- Don\'t be fooled by keywords - understand the actual topic (e.g., \'chuppas niddah\' is about kiddushin, not niddah laws)\n- Choose acharonim that discuss the SPECIFIC QUESTION asked, not just the general topic'}], 'model': 'claude-sonnet-4-20250514', 'system': 'You are a Torah scholar assistant that helps find marei mekomos (source references) for any Torah topic using a "sugya archaeology" approach.\n\nMETHODOLOGY - WORK BACKWARDS FROM ACHARONIM:\nInstead of guessing which sources are important, you will search through later commentaries (acharonim and late rishonim) to discover which earlier sources THEY cite most frequently. This reveals the true "ikkar" (foundation) of the sugya.\n\nSTEP 1 - IDENTIFY RELEVANT META-COMMENTARIES:\nBased on the topic, determine which acharonim/late rishonim would discuss it:\n\nFor Gemara topics:\n- Pnei Yehoshua (on most masechtos)\n- Rabbi Akiva Eiger\n- Late Rishonim who quote earlier sources: Ran, Ritva, Rashba, Nimukei Yosef\n\nFor Halachic topics (Orach Chaim/Yoreh Deah):\n- Mishnah Berurah\n- Shach, Taz\n- Beur Halacha\n\nFor Even HaEzer/Choshen Mishpat:\n- Ketzos HaChoshen, Nesivos HaMishpat\n- Chelkas Mechokek, Beis Shmuel\n\nFor Rambam:\n- Kesef Mishneh, Magid Mishneh, Lechem Mishneh\n\nAlways include:\n- Shulchan Aruch, Rama, Tur\n- Beis Yosef, Darchei Moshe\n\nSTEP 2 - SEARCH THESE SOURCES ON SEFARIA:\nReturn Sefaria references to WHERE these acharonim discuss this topic. For example:\n- "Pnei Yehoshua on Kiddushin 5a"\n- "Mishnah Berurah 431:1"\n- "Ketzos HaChoshen 201:1"\n\nSTEP 3 - IDENTIFY CITATION PATTERNS:\nYou will be given the TEXT of these acharonim. Your job is to:\n1. Extract which earlier sources they cite (ignore their lomdus/svara)\n2. Count how many times each source appears across multiple acharonim\n3. Prioritize sources cited by multiple acharonim - these are the ikkar!\n\nCRITICAL RULES:\n1. Use EXACT Sefaria reference formats\n2. DO NOT make up sources - only suggest what exists on Sefaria\n3. For Gemara: "Kiddushin 5a", "Berakhot 6b"\n4. For Chumash: "Shemot 12:15", "Bereishit 1:1"\n5. For Rishonim: "Rashi on Kiddushin 5a", "Tosafot on Kiddushin 5a"\n6. For Rambam: "Mishneh Torah, Ishut 10:2"\n7. For Shulchan Aruch: "Shulchan Arukh, Even HaEzer 55:1"\n\nRESPONSE FORMAT:\nReturn TWO JSON objects:\n\nFirst - the acharonim to search:\n{\n  "acharonim_to_search": [\n    {"ref": "Pnei Yehoshua on Kiddushin 5a", "category": "Acharonim"},\n    {"ref": "Ketzos HaChoshen 201:1", "category": "Acharonim"},\n    ...\n  ]\n}\n\nAfter analyzing their texts, return the final sources:\n{\n  "sources": [\n    {"ref": "Kiddushin 5a", "category": "Gemara", "citation_count": 5},\n    {"ref": "Rashi on Kiddushin 5a", "category": "Rishonim", "citation_count": 4},\n    ...\n  ],\n  "summary": "Brief summary of the sugya"\n}\n\nOnly return valid JSON, no other text.'}}
2025-11-27 22:56:35 | DEBUG    | anthropic._base_client:request:1045 | Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-11-27 22:56:35 | DEBUG    | httpcore.http11:trace:47 | send_request_headers.started request=<Request [b'POST']>
2025-11-27 22:56:35 | DEBUG    | httpcore.http11:trace:47 | send_request_headers.complete
2025-11-27 22:56:35 | DEBUG    | httpcore.http11:trace:47 | send_request_body.started request=<Request [b'POST']>
2025-11-27 22:56:35 | DEBUG    | httpcore.http11:trace:47 | send_request_body.complete
2025-11-27 22:56:35 | DEBUG    | httpcore.http11:trace:47 | receive_response_headers.started request=<Request [b'POST']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:trace:47 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:38 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'29000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-11-28T03:56:36Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'8000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-11-28T03:56:40Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-11-28T03:56:34Z'), (b'retry-after', b'26'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'37000'), (b'anthropic-ratelimit-tokens-reset', b'2025-11-28T03:56:36Z'), (b'request-id', b'req_011CVZcbHm8LyqNzSeDJQTbA'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'73a09491-cda3-40b4-8544-d00ca1bc9331'), (b'x-envoy-upstream-service-time', b'4637'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9a56efa64ae7db6d-EWR')])
2025-11-27 22:56:40 | INFO     | httpx:_send_single_request:1025 | HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:trace:47 | receive_response_body.started request=<Request [b'POST']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:trace:47 | receive_response_body.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:trace:47 | response_closed.started
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:trace:47 | response_closed.complete
2025-11-27 22:56:40 | DEBUG    | anthropic._base_client:request:1083 | HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 28 Nov 2025 03:56:38 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '29000', 'anthropic-ratelimit-input-tokens-reset': '2025-11-28T03:56:36Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '8000', 'anthropic-ratelimit-output-tokens-reset': '2025-11-28T03:56:40Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-11-28T03:56:34Z', 'retry-after': '26', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '37000', 'anthropic-ratelimit-tokens-reset': '2025-11-28T03:56:36Z', 'request-id': 'req_011CVZcbHm8LyqNzSeDJQTbA', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '73a09491-cda3-40b4-8544-d00ca1bc9331', 'x-envoy-upstream-service-time': '4637', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9a56efa64ae7db6d-EWR'})
2025-11-27 22:56:40 | DEBUG    | anthropic._base_client:request:1091 | request_id: req_011CVZcbHm8LyqNzSeDJQTbA
2025-11-27 22:56:40 | DEBUG    | __main__:get_sources_from_claude:296 | Claude Step 1 response received. Usage: Usage(cache_creation=CacheCreation(ephemeral_1h_input_tokens=0, ephemeral_5m_input_tokens=0), cache_creation_input_tokens=0, cache_read_input_tokens=0, input_tokens=1290, output_tokens=316, server_tool_use=None, service_tier='standard')
2025-11-27 22:56:40 | DEBUG    | __main__:get_sources_from_claude:302 | Step 1 response length: 674 characters
2025-11-27 22:56:40 | DEBUG    | __main__:parse_claude_json:436 | Extracting JSON from markdown json fence
2025-11-27 22:56:40 | DEBUG    | __main__:parse_claude_json:457 | Successfully parsed JSON
2025-11-27 22:56:40 | INFO     | __main__:get_sources_from_claude:311 | Claude identified 8 acharonim to search
2025-11-27 22:56:40 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Pnei Yehoshua on Kiddushin 5a
2025-11-27 22:56:40 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Pnei Yehoshua on Kiddushin 5a'
2025-11-27 22:56:40 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Pnei%20Yehoshua%20on%20Kiddushin%205a
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FCAC0>
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347C9C0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A89A0>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:56:38 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Pnei%20Yehoshua%20on%20Kiddushin%205a'), (b'x-varnish', b'857708204'), (b'Age', b'0'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=lviZ2VIacvsqCWWtl%2FcdwYYtMbO3VNfeWETm76JV41HctKHei7vMONKksCuE4KPfSld6Lxm8b0kOqG9EQdia8bIjKY7eNkPa8agqroFV"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56efc4095e4225-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:40 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Pnei%20Yehoshua%20on%20Kiddushin%205a "HTTP/1.1 404 Not Found"
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:40 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Pnei Yehoshua on Kiddushin 5a'
2025-11-27 22:56:40 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Pnei Yehoshua on Kiddushin 5a'
2025-11-27 22:56:40 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Pnei Yehoshua on Kiddushin 5a"}
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:40 | WARNING  | __main__:get_sources_from_claude:333 | Could not fetch text for Pnei Yehoshua on Kiddushin 5a
2025-11-27 22:56:40 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Rabbi Akiva Eiger on Kiddushin 5a
2025-11-27 22:56:40 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Rabbi Akiva Eiger on Kiddushin 5a'
2025-11-27 22:56:40 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Rabbi%20Akiva%20Eiger%20on%20Kiddushin%205a
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A5D30>
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CB40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A5AC0>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:56:38 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Rabbi%20Akiva%20Eiger%20on%20Kiddushin%205a'), (b'x-varnish', b'883077083'), (b'Age', b'0'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=iKQKoaqTK8ueh0RJkApLFPyOHekHidDbOp1ugXycB7Td7ocpMyZDAwNo7c6ugZSMswPLFX%2BzwDjYt8Ls360NGCWkETGiECpcpsk%2BCpcJ"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56efc518e943a6-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:40 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Rabbi%20Akiva%20Eiger%20on%20Kiddushin%205a "HTTP/1.1 404 Not Found"
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:40 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Rabbi Akiva Eiger on Kiddushin 5a'
2025-11-27 22:56:40 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Rabbi Akiva Eiger on Kiddushin 5a'
2025-11-27 22:56:40 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Rabbi Akiva Eiger on Kiddushin 5a"}
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:40 | WARNING  | __main__:get_sources_from_claude:333 | Could not fetch text for Rabbi Akiva Eiger on Kiddushin 5a
2025-11-27 22:56:40 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Kesef Mishneh on Mishneh Torah, Ishut 10:7
2025-11-27 22:56:40 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Kesef Mishneh on Mishneh Torah, Ishut 10:7'
2025-11-27 22:56:40 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Kesef%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:7
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FCF10>
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CF40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35EA400>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:56:38 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Kesef%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:7'), (b'x-varnish', b'862821422'), (b'Age', b'0'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=umtp7YkUqDnrWH6iqXe4Yb%2BpgggwPutaVKY0CAbweMNYrfx%2FC%2Bda2nT5VFgmlfjFLqWxuQrfY0Qj%2BwwBfcf1lgZqgN3k7EzgN1pq2J39"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56efc61f378c6c-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:40 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Kesef%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:7 "HTTP/1.1 404 Not Found"
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:40 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Kesef Mishneh on Mishneh Torah, Ishut 10:7'
2025-11-27 22:56:40 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Kesef Mishneh on Mishneh Torah, Ishut 10:7'
2025-11-27 22:56:40 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Kesef Mishneh on Mishneh Torah, Ishut 10.7"}
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:40 | WARNING  | __main__:get_sources_from_claude:333 | Could not fetch text for Kesef Mishneh on Mishneh Torah, Ishut 10:7
2025-11-27 22:56:40 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Magid Mishneh on Mishneh Torah, Ishut 10:7
2025-11-27 22:56:40 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Magid Mishneh on Mishneh Torah, Ishut 10:7'
2025-11-27 22:56:40 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Magid%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:7
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35BFC10>
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CD40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35F70D0>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:56:38 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Magid%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:7'), (b'x-varnish', b'880154042'), (b'Age', b'0'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=KzixCsXHrEiWbfkimkeRQjqg%2BzFiSbIUZMlq6mrGsr4uNr%2FuuUuc8x0ijobruL4ynzmzgkKv%2BB0ANdBexbCHcCjqRDp2bT75%2BWxoe%2BnO"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56efc6fb2d5017-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:40 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Magid%20Mishneh%20on%20Mishneh%20Torah,%20Ishut%2010:7 "HTTP/1.1 404 Not Found"
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:40 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:40 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Magid Mishneh on Mishneh Torah, Ishut 10:7'
2025-11-27 22:56:40 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Magid Mishneh on Mishneh Torah, Ishut 10:7'
2025-11-27 22:56:40 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Magid Mishneh on Mishneh Torah, Ishut 10.7"}
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:40 | WARNING  | __main__:get_sources_from_claude:333 | Could not fetch text for Magid Mishneh on Mishneh Torah, Ishut 10:7
2025-11-27 22:56:40 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1
2025-11-27 22:56:40 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:56:40 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Beit%20Shmuel%20on%20Shulchan%20Arukh,%20Even%20HaEzer%2061:1
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A2040>
2025-11-27 22:56:40 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C347CCC0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:41 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FEFD0>
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:39 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Beit%20Shmuel%20on%20Shulchan%20Arukh,%20Even%20HaEzer%2061:1'), (b'x-varnish', b'836218057 856332761'), (b'Age', b'1745'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=C4amOMx8KJm7pVBkjqTOAGlJpDCRVPGMOLz89ymzuEHMWDJ5nfArAVknyC2i8bXYd6li2J9xyH5AOt6I0pMnj%2F8XN3uWOnk32%2BIFHQOz"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56efc84f3bccb6-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:41 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Beit%20Shmuel%20on%20Shulchan%20Arukh,%20Even%20HaEzer%2061:1 "HTTP/1.1 200 OK"
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:41 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:56:41 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:56:41 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:56:41 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Vilna, 1876, text_type=list
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 25 items -> 10374 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 10125 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 8664 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 67 items -> 29188 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 7767 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 34 items -> 14498 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 43 items -> 21867 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 418 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 2367 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 3896 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 11455 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 2487 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 38 items -> 12677 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 25 items -> 12331 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 3741 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 172 items -> 82612 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 266 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 1272 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 2566 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 5043 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 6251 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1053 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 248 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 1593 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 2144 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 25 items -> 9954 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 60 items -> 37651 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 25 items -> 11132 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 7323 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 11454 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 2968 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 787 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 1103 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 39 items -> 14133 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 2742 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 52 items -> 25163 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 70 items -> 25628 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 9686 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 5649 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 1022 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 14870 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1102 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 5256 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 24 items -> 10643 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 8026 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 3345 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 1178 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1105 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 18340 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 7715 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 728 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 8979 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 992 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 4110 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 1657 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 2906 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 405 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 138 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 6485 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 6544 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1898 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 3707 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 1168 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 29 items -> 14794 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 5872 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 25 items -> 11918 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 2818 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 36 items -> 11996 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 3355 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 837 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 8225 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 20 items -> 7133 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 4211 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 33 items -> 19354 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 3980 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1784 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 27 items -> 7805 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 2837 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 3092 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 2076 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 593 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 42 items -> 17184 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 7522 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1019 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 6267 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 2016 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 69 items -> 28409 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 10377 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 21 items -> 6372 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 49 items -> 17190 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 3503 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 5677 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 40 items -> 16831 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 5150 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 9245 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 2267 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 44 items -> 18286 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 2624 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 26 items -> 8294 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 5557 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 2086 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 4575 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 4594 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 5741 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 1269 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1921 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 1430 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 3684 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 33 items -> 15061 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 9053 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 8695 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 37 items -> 15604 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 6841 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 25 items -> 14681 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 28 items -> 10331 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 9985 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 9778 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 7705 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 3707 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 4440 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 21 items -> 9415 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 38 items -> 11049 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 41 items -> 14942 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 9028 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 8258 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 51 items -> 23187 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 32 items -> 19743 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 5020 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 8299 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1666 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 15 items -> 5068 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 3250 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 4439 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 2430 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 5808 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 31 items -> 15532 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 6989 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 109 items -> 44771 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 42 items -> 17899 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 34 items -> 19192 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 15 items -> 10208 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 6702 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 3814 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 4294 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 6162 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 1892 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 1403 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 600 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 5732 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 2577 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 35 items -> 18650 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 34 items -> 18385 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 11676 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 4488 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 2003 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 4186 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 5002 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 1790 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 615 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 5040 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 4624 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 7998 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 4414 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 2694 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 4022 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 56 items -> 26974 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 15 items -> 11438 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1307 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 4882 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 9328 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 5253 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 6133 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 1454 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 2157 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 3940 characters
2025-11-27 22:56:41 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 178 items -> 1408245 characters
2025-11-27 22:56:41 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 1408245 characters
2025-11-27 22:56:41 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 1375772 characters
2025-11-27 22:56:41 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:56:41 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1': he_text=yes en_text=no
2025-11-27 22:56:41 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:41 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:41 | DEBUG    | __main__:get_sources_from_claude:331 | Successfully fetched text for Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1
2025-11-27 22:56:41 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1
2025-11-27 22:56:41 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:56:41 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Chelkat%20Mechokek%20on%20Shulchan%20Arukh,%20Even%20HaEzer%2061:1
2025-11-27 22:56:41 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:41 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37B7190>
2025-11-27 22:56:41 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C35AEA40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:41 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A8EE0>
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:41 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:40 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Chelkat%20Mechokek%20on%20Shulchan%20Arukh,%20Even%20HaEzer%2061:1'), (b'x-varnish', b'860070855 850664789'), (b'Age', b'1747'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=uy1Bax9%2FHIJqp7%2BTClu4JImMfBHc67faz3FJify7p5xR2jF0TYKWvbPNNcMgR2pyUcXDhvEr0Yq%2FfsoldZxAbtQ5n4mBZ84NEveihyXu"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56efcde941a0fb-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:42 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Chelkat%20Mechokek%20on%20Shulchan%20Arukh,%20Even%20HaEzer%2061:1 "HTTP/1.1 200 OK"
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:42 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Vilna, 1876, text_type=list
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 7385 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 4233 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 7091 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 38 items -> 16329 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 2942 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 4118 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 29 items -> 13570 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 173 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 2307 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 3837 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 5185 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 2447 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 4328 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 2614 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 699 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 122 items -> 93032 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 238 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1406 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 2035 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 2730 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 21 items -> 4981 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 773 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 240 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 998 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 1550 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 24 items -> 8517 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 43 items -> 21013 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 22 items -> 8156 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 6355 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 20 items -> 6490 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 3042 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1078 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 1011 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 35 items -> 12761 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 2363 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 45 items -> 13243 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 58 items -> 17254 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 4371 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 5102 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1113 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 10981 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1096 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 3805 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 5430 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 7986 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1494 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 1433 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 762 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 8654 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 15 items -> 5217 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 894 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 5877 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 471 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 4242 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 1609 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 340 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 607 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 451 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 6043 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 3485 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 1323 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 2098 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 349 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 48 items -> 15810 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 3311 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 4843 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 2734 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 45 items -> 14931 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 3048 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 1431 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 6540 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 20 items -> 6682 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 20 items -> 5041 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 33 items -> 25583 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 3200 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 666 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 35 items -> 10146 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 3477 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 2528 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 2059 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 709 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 45 items -> 12542 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 4289 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1157 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 4893 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1425 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 63 items -> 18291 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 4659 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 17 items -> 3186 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 49 items -> 11539 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 2493 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 12 items -> 5607 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 35 items -> 12023 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 2606 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 16 items -> 5670 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 8 items -> 3132 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 44 items -> 14091 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 2011 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 24 items -> 8889 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 4818 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 13 items -> 4406 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 6639 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 7 items -> 3213 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 20 items -> 6250 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 5 items -> 1077 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 815 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 1683 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 3757 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 35 items -> 8231 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 24 items -> 8061 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 3397 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 37 items -> 13424 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 3777 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 23 items -> 12291 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 28 items -> 12669 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 27 items -> 8523 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 27 items -> 7512 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 11 items -> 3135 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 6 items -> 2166 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 14 items -> 3014 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 24 items -> 7105 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 43 items -> 10340 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 39 items -> 9298 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 1638 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 4 items -> 6951 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 287 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 1227 characters
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 144 items -> 758846 characters
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 758846 characters
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 739468 characters
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:56:42 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1': he_text=yes en_text=no
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:42 | DEBUG    | __main__:get_sources_from_claude:331 | Successfully fetched text for Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1
2025-11-27 22:56:42 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Ran on Kiddushin 5a
2025-11-27 22:56:42 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Ran on Kiddushin 5a'
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Ran%20on%20Kiddushin%205a
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35F7FA0>
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C358CA40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C34C3A00>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:40 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Ran%20on%20Kiddushin%205a'), (b'x-varnish', b'885367082 855622220'), (b'Age', b'1472'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=amjlRfK%2BsrWqcOX78jDnalUYWgp7OBaO4LIL2wmWLZDiK3MDIYPFhsT0lbGONFD2SX4JjeaULWt6aRejODbETpziM43euPoGxJZgcBRC"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56efd20e2cd93c-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:42 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Ran%20on%20Kiddushin%205a "HTTP/1.1 200 OK"
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:42 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Ran on Kiddushin 5a'
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Ran on Kiddushin 5a'
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Vilna Edition, text_type=list
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 10 items -> 6883 characters
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 6883 characters
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 6308 characters
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:56:42 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Ran on Kiddushin 5a': he_text=yes en_text=no
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:42 | DEBUG    | __main__:get_sources_from_claude:331 | Successfully fetched text for Ran on Kiddushin 5a
2025-11-27 22:56:42 | INFO     | __main__:get_sources_from_claude:320 | Fetching acharon text: Ritva on Kiddushin 5a
2025-11-27 22:56:42 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Ritva on Kiddushin 5a'
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Ritva%20on%20Kiddushin%205a
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37B7F10>
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C37AC240> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37B7C40>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:40 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Ritva%20on%20Kiddushin%205a'), (b'x-varnish', b'885823461 855622225'), (b'Age', b'1472'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=o5xfHMqLPRXN11Px8K3I%2Ft3MAv1Z276pVQHpzqh035ZAirK9BT08pFIzDDnvz3h5b5%2FjVkNjYpBqqADhCgiT83VSqO5VAoIAjykxujAQ"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56efd35fcd0ee6-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:42 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Ritva%20on%20Kiddushin%205a "HTTP/1.1 200 OK"
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:42 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Ritva on Kiddushin 5a'
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Ritva on Kiddushin 5a'
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Chiddushei haRitva, Munkatch, 1908., text_type=list
2025-11-27 22:56:42 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 9 items -> 4707 characters
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 4707 characters
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 4664 characters
2025-11-27 22:56:42 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:56:42 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Ritva on Kiddushin 5a': he_text=yes en_text=no
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:42 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:42 | DEBUG    | __main__:get_sources_from_claude:331 | Successfully fetched text for Ritva on Kiddushin 5a
2025-11-27 22:56:42 | INFO     | __main__:get_sources_from_claude:344 | STAGE 2: Analyzing 4 acharon texts to extract citations
2025-11-27 22:56:42 | DEBUG    | __main__:get_sources_from_claude:362 | Step 2 message length: 4614 characters
2025-11-27 22:56:42 | DEBUG    | anthropic._base_client:_build_request:493 | Request options: {'method': 'post', 'url': '/v1/messages', 'timeout': Timeout(connect=5.0, read=600, write=600, pool=600), 'files': None, 'idempotency_key': 'stainless-python-retry-13253438-ea2f-489d-9009-a98cfed88745', 'json_data': {'max_tokens': 2000, 'messages': [{'role': 'user', 'content': 'Topic: rav huna chuppas niddah rambam\nLevel: intermediate - Include the main sugya and key rishonim - return 5-15 sources.\n\nSTEP 2: Below are texts from acharonim discussing this topic.\nExtract which EARLIER SOURCES they cite (ignore their lomdus).\nCount how many acharonim cite each source.\nReturn the sources cited by multiple acharonim as the \'ikkar\' of the sugya.\n\nAcharon texts:\n=== Beit Shmuel on Shulchan Arukh, Even HaEzer 61:1 ===\nחייב כל אדם לישא אשה. וחייב לבעול בכל עונה אפי\' שהרשת את בעלה שימנע עונתה חייב לבעול בכל עונה עד שיהי\' לו בנים כ"כ הרמב"ם פט"ו ה\' אישות וכן איתא לקמן סי\' ע"ו ומשמע אחר שיהיה לו בנים מהני רשות שלה אפי\' אם יכול להוליד וא"י מנ"ל לרמב"ם חילוק זה דמהני מחילה שלה אחר הקיום פו"ר ולא מהני קודם שקיים פו"ר דהא אפי\' אם קיים פו"ר מ"מ חייב לקיים לערב אל תנח ידך אף על גב דכתבתי בסמוך מצוה לערב אינו אלא מדרבנן, מ"מ מנ"ל דמהני מחילה שלה, וראיתי במגי"ד שכתב שם דלמד הרמב"ם מסוגיא פרק אעפ"י דמבעיא ליה בש"ס על מתני\' דתנא התלמידים יוצאים שלא ברשות ל\' יום ברשות כמה והשיב לו ברשות כמה דבעי ש"מ רשות מהני מיהו קשה א"כ למה לא מהני רשות שלה אפילו לא קיים פו"ר אלא ודאי הסוגיא לא איירי לבטל מצות פו"ר אם כן מנ"ל דמהני לבטל מצות לערב אל תנח דלמא איירי דהוא מקיים לערב אל תנח במקום שהולך אלא איירי דהיא יכולה למחול עונה שלה: אין מוכרין ס"ת אלא כדי ללמוד תורה. בכלל זה איתא הספקת תלמידים ובכלל לישא אשה איתא להשיא יתומים כמ"ש בא"ח סי\' קנ"ג ושאר ספרים נמי אסור למכור כמ"ש בי"ד סי\' ר"ע, וכתב בחלקת מחוקק דוקא משום מצות פריה ו\n\n=== Chelkat Mechokek on Shulchan Arukh, Even HaEzer 61:1 ===\nאין מוכרין ס"ת וכו\'. בש"ע בא"ח סימן קנ"ג פסק דמותר למכור ס"ת להספקת תלמידים או להשיא יתומים בדמיו והיא מדברי הריב"ש הביאו הב"י (שם בסי\' הנ"ל וסיים הריב"ש בדבריו) דהוי דומיא דללמוד תורה ולישא אשה ולפ"ז דוקא יתום שרוצה לקיים פ"ו ואין סיפוק בידו אבל בשביל יתומה אין מוכרין (דאשה אינה מצווה על פ"ו כדפסק בסי\' זה סעיף י"ג) ושאר פרטי דין זה אם אין לו מה לאכול או למצות פדיון שבוים וכן אם יש חילוק בין ס"ת של יחיד לשל רבים עיין בי"ד סי\' ר"ע וסי\' רפ"ב ובא"ח סי\' קנ"ג ואין כאן מקום להאריך בדין מכירת ס"ת: שישא אשה בן י"ח. אף על גב דכל המצות חייב לקיים מיד כשנעשה בן י"ג מ"מ מצוה זו קבלו חז"ל שבן י"ח לחופה מאחר שצריך ללמוד קודם שישא אשה (כמבואר בש"ע טי"ד סי\' רמ"ו סעיף ב\') התחלת למוד גמ\' הוא מבן ט"ו ואילך: אבל קודם י"ג לא ישא וכו\'. זה הוא לשון הטור, גם הרמב"ם בפכ"א מהא"ב כתב ואסור להשיא אשה לקטן שזה כמו זנות הוא ופשט הלשון משמע דקטן הוא כל שלא מלאו לו י"ג שנה ויום אחד ויש לו שערות כמו קטן דכל הש"ס ולפי זה סמוך לפרקן שהוא מצוה כדאמרינן בגמ\' (יבמות דס"ב סנהדרין דף ע"ו) (גם הרמב"ם הביאו בפ\' הנ"ל קודם דין ה\n\n=== Ran on Kiddushin 5a ===\nהב שדי דלא כפלה לדבורה מהו: תגא דמלכא אינה מקודשת. פירש רש"י ז"ל דלשון שבועה הוא ור"ח ז"ל פירש אפי\' נתן לה תגא דמלכא שהוא חשוב הרבה אינה מקודשת. ואיכא מ"ד דטעמא דאינה מקודשת משום דאדבורה קמא קא סמכא דקאמרה ליה מעיקרא הב שלא לשם קידושין אבל אי אמר לה איהו מעיקרא אי יהיבנא מיקדשת לי ואמרה הבה אי נמי הבה מיהבא כדאמר איהו קאמרה ומקודשת וכן נמי אפי\' היכא דאמרה איהי מעיקרא הב אם חזר ואמר לה בשעת נתינה התקדשי לי בו ואיהי אמרה הב או הבה מיהבא מקודשת אבל הרשב"א ז"ל סובר דאפי\' לא אמרה איהי מעיקרא מידי כיון דאיהו אמר בלשון שאלה אי יהיבנא לך מיקדשת לי ואיהי לא מהדרא ליה אין מקדשנא לך אלא אמרה ליה הב או הבה מיהבא אפי\' חזר ואמר לה הרי את מקודשת לי בזה לא מהני ולא מידי דעיקר טעמא דאינה מקודשת היינו משום דכיון דבלשון שאלה קאמר אם איתא דמרציא ליה הוה לה לאהדורי אין מקדשנא לך ומדלא מהדרא הכי אלא אמרה הבה מיהבא ודאי הכי קאמרה בקידושי לא ניחא לי אלא במתנה ולפיכך אם חזר ואמר התקדשי לי אינה מקודשת. [והאשר"י כתב כסברא ראשונה]: ונראה לי כל שלא אמר לה בלשונות האמורים בגמרא איכא לספוקי בלשון קדושין וצריכה גט שכ\n\n=== Ritva on Kiddushin 5a ===\nומנין שאף בשטר והא דפריש ביאה מקמי שטר ולא נקיט שטר אחר כסף כסדורא דמתני\' משום דהכא מקראי דריש להו ונקט סדרא דקראי כי יקח והדר ובעלה והדר ויצאה והיתה: ודין הוא ומה כסף שאינו מוציא מכניס שטר שמוציא כלומר ויש בו כח דהיתרא להתיר האסור אינו דין שמכניס ויאסור המותר דהא ודאי כח דהיתרא עדיפא והקשה הראב"ד ז"ל אמאי לא אייתי לה בק"ו מאמה העבריה ולימא הכי ומה אמה העבריה שאינה נקנית בביאה נקנית בשטר מי שנקנית בביאה אינו דין שנקנית בשטר וכי מפריך ק"ו משום דאמה אינה נקנית לשם אישות אתי במה מצינו כדפרישנא לעיל. ומסתברא דלאו קושיא היא דאכתי איכא למיפרך מעיקרא דדינא כדפריך רב אשי לעיל מה לאמה העבריה שכן יוצאת בכסף ואע"ג דלעיל אתינן למילף כסף והשתא ילפינן שטר כיון דמה מצינו הוא שפיר איכא למימר שאין זו דומה לאמה ללמוד ממנה כיון שאמה יוצאה בכסף ואין זו יוצאה בכסף: מה לכסף שכן פודין בו הקדשות ומעשר שני. פי\' והוא ג"כ כחא דהיתרא משא"כ בשטר. וכי תימא ואי משום דכסף פודין בו הקדשות הוא שקונה כאן נימא דיו לבא מן הדין להיות כנדון ומה התם אין פודין מדין כסף בשטרות ועבדים וקרקעות אף הכא נמי אין אשה נקנית בהם ואלו א\n\nReturn final JSON with \'sources\' and \'summary\'.'}], 'model': 'claude-sonnet-4-20250514', 'system': 'You are a Torah scholar assistant that helps find marei mekomos (source references) for any Torah topic using a "sugya archaeology" approach.\n\nMETHODOLOGY - WORK BACKWARDS FROM ACHARONIM:\nInstead of guessing which sources are important, you will search through later commentaries (acharonim and late rishonim) to discover which earlier sources THEY cite most frequently. This reveals the true "ikkar" (foundation) of the sugya.\n\nSTEP 1 - IDENTIFY RELEVANT META-COMMENTARIES:\nBased on the topic, determine which acharonim/late rishonim would discuss it:\n\nFor Gemara topics:\n- Pnei Yehoshua (on most masechtos)\n- Rabbi Akiva Eiger\n- Late Rishonim who quote earlier sources: Ran, Ritva, Rashba, Nimukei Yosef\n\nFor Halachic topics (Orach Chaim/Yoreh Deah):\n- Mishnah Berurah\n- Shach, Taz\n- Beur Halacha\n\nFor Even HaEzer/Choshen Mishpat:\n- Ketzos HaChoshen, Nesivos HaMishpat\n- Chelkas Mechokek, Beis Shmuel\n\nFor Rambam:\n- Kesef Mishneh, Magid Mishneh, Lechem Mishneh\n\nAlways include:\n- Shulchan Aruch, Rama, Tur\n- Beis Yosef, Darchei Moshe\n\nSTEP 2 - SEARCH THESE SOURCES ON SEFARIA:\nReturn Sefaria references to WHERE these acharonim discuss this topic. For example:\n- "Pnei Yehoshua on Kiddushin 5a"\n- "Mishnah Berurah 431:1"\n- "Ketzos HaChoshen 201:1"\n\nSTEP 3 - IDENTIFY CITATION PATTERNS:\nYou will be given the TEXT of these acharonim. Your job is to:\n1. Extract which earlier sources they cite (ignore their lomdus/svara)\n2. Count how many times each source appears across multiple acharonim\n3. Prioritize sources cited by multiple acharonim - these are the ikkar!\n\nCRITICAL RULES:\n1. Use EXACT Sefaria reference formats\n2. DO NOT make up sources - only suggest what exists on Sefaria\n3. For Gemara: "Kiddushin 5a", "Berakhot 6b"\n4. For Chumash: "Shemot 12:15", "Bereishit 1:1"\n5. For Rishonim: "Rashi on Kiddushin 5a", "Tosafot on Kiddushin 5a"\n6. For Rambam: "Mishneh Torah, Ishut 10:2"\n7. For Shulchan Aruch: "Shulchan Arukh, Even HaEzer 55:1"\n\nRESPONSE FORMAT:\nReturn TWO JSON objects:\n\nFirst - the acharonim to search:\n{\n  "acharonim_to_search": [\n    {"ref": "Pnei Yehoshua on Kiddushin 5a", "category": "Acharonim"},\n    {"ref": "Ketzos HaChoshen 201:1", "category": "Acharonim"},\n    ...\n  ]\n}\n\nAfter analyzing their texts, return the final sources:\n{\n  "sources": [\n    {"ref": "Kiddushin 5a", "category": "Gemara", "citation_count": 5},\n    {"ref": "Rashi on Kiddushin 5a", "category": "Rishonim", "citation_count": 4},\n    ...\n  ],\n  "summary": "Brief summary of the sugya"\n}\n\nOnly return valid JSON, no other text.'}}
2025-11-27 22:56:42 | DEBUG    | anthropic._base_client:request:1045 | Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:trace:47 | send_request_headers.started request=<Request [b'POST']>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:trace:47 | send_request_headers.complete
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:trace:47 | send_request_body.started request=<Request [b'POST']>
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:trace:47 | send_request_body.complete
2025-11-27 22:56:42 | DEBUG    | httpcore.http11:trace:47 | receive_response_headers.started request=<Request [b'POST']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:trace:47 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:50 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Content-Encoding', b'gzip'), (b'anthropic-ratelimit-input-tokens-limit', b'30000'), (b'anthropic-ratelimit-input-tokens-remaining', b'27000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-11-28T03:56:49Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-11-28T03:56:54Z'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-11-28T03:56:42Z'), (b'retry-after', b'18'), (b'anthropic-ratelimit-tokens-limit', b'38000'), (b'anthropic-ratelimit-tokens-remaining', b'34000'), (b'anthropic-ratelimit-tokens-reset', b'2025-11-28T03:56:49Z'), (b'request-id', b'req_011CVZcbprec39rkM9HRKbKK'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'anthropic-organization-id', b'73a09491-cda3-40b4-8544-d00ca1bc9331'), (b'x-envoy-upstream-service-time', b'9342'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9a56efd3c9b3db6d-EWR')])
2025-11-27 22:56:52 | INFO     | httpx:_send_single_request:1025 | HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:trace:47 | receive_response_body.started request=<Request [b'POST']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:trace:47 | receive_response_body.complete
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:trace:47 | response_closed.started
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:trace:47 | response_closed.complete
2025-11-27 22:56:52 | DEBUG    | anthropic._base_client:request:1083 | HTTP Response: POST https://api.anthropic.com/v1/messages "200 OK" Headers({'date': 'Fri, 28 Nov 2025 03:56:50 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'content-encoding': 'gzip', 'anthropic-ratelimit-input-tokens-limit': '30000', 'anthropic-ratelimit-input-tokens-remaining': '27000', 'anthropic-ratelimit-input-tokens-reset': '2025-11-28T03:56:49Z', 'anthropic-ratelimit-output-tokens-limit': '8000', 'anthropic-ratelimit-output-tokens-remaining': '7000', 'anthropic-ratelimit-output-tokens-reset': '2025-11-28T03:56:54Z', 'anthropic-ratelimit-requests-limit': '50', 'anthropic-ratelimit-requests-remaining': '49', 'anthropic-ratelimit-requests-reset': '2025-11-28T03:56:42Z', 'retry-after': '18', 'anthropic-ratelimit-tokens-limit': '38000', 'anthropic-ratelimit-tokens-remaining': '34000', 'anthropic-ratelimit-tokens-reset': '2025-11-28T03:56:49Z', 'request-id': 'req_011CVZcbprec39rkM9HRKbKK', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'anthropic-organization-id': '73a09491-cda3-40b4-8544-d00ca1bc9331', 'x-envoy-upstream-service-time': '9342', 'cf-cache-status': 'DYNAMIC', 'x-robots-tag': 'none', 'server': 'cloudflare', 'cf-ray': '9a56efd3c9b3db6d-EWR'})
2025-11-27 22:56:52 | DEBUG    | anthropic._base_client:request:1091 | request_id: req_011CVZcbprec39rkM9HRKbKK
2025-11-27 22:56:52 | DEBUG    | __main__:get_sources_from_claude:371 | Claude Step 2 response received. Usage: Usage(cache_creation=CacheCreation(ephemeral_1h_input_tokens=0, ephemeral_5m_input_tokens=0), cache_creation_input_tokens=0, cache_read_input_tokens=0, input_tokens=4176, output_tokens=515, server_tool_use=None, service_tier='standard')
2025-11-27 22:56:52 | DEBUG    | __main__:get_sources_from_claude:377 | Step 2 response length: 1449 characters
2025-11-27 22:56:52 | DEBUG    | __main__:parse_claude_json:436 | Extracting JSON from markdown json fence
2025-11-27 22:56:52 | DEBUG    | __main__:parse_claude_json:457 | Successfully parsed JSON
2025-11-27 22:56:52 | INFO     | __main__:get_sources_from_claude:384 | Successfully extracted 11 sources from acharon analysis
2025-11-27 22:56:52 | DEBUG    | cache_manager:set:87 | Cache DISABLED - not saving
2025-11-27 22:56:52 | DEBUG    | __main__:get_sources_from_claude:388 | Saved final result to cache
2025-11-27 22:56:52 | INFO     | __main__:search_sources:597 | Claude suggested 11 sources (before Sefaria lookup)
2025-11-27 22:56:52 | DEBUG    | __main__:search_sources:598 | Suggested sources: [{'ref': 'Kiddushin 5a', 'category': 'Gemara', 'citation_count': 3}, {'ref': 'Yevamot 62b', 'category': 'Gemara', 'citation_count': 2}, {'ref': 'Mishneh Torah, Laws of Marriage 15', 'category': 'Rishonim', 'citation_count': 2}, {'ref': 'Mishneh Torah, Laws of Marriage 21', 'category': 'Rishonim', 'citation_count': 2}, {'ref': 'Rashi on Kiddushin 5a', 'category': 'Rishonim', 'citation_count': 2}, {'ref': 'Rashba', 'category': 'Rishonim', 'citation_count': 2}, {'ref': 'Rosh', 'category': 'Rishonim', 'citation_count': 1}, {'ref': 'Tur, Even HaEzer 61', 'category': 'Rishonim', 'citation_count': 1}, {'ref': 'Shulchan Arukh, Even HaEzer 61:1', 'category': 'Acharonim', 'citation_count': 2}, {'ref': 'Rivash', 'category': 'Rishonim', 'citation_count': 1}, {'ref': 'Raavad', 'category': 'Rishonim', 'citation_count': 1}]
2025-11-27 22:56:52 | INFO     | __main__:search_sources:614 | [1/11] Looking up: 'Kiddushin 5a' (category: Gemara)
2025-11-27 22:56:52 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Kiddushin 5a'
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Kiddushin%205a
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A5F40>
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C37AC4C0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FCC40>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:50 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Kiddushin%205a'), (b'x-varnish', b'881798491 868913865'), (b'Age', b'1680'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=%2FVt4tg3dc1lVVu6l8iRulMJkvhs0%2BVyfB%2Bq4vekPv0AV8WNiuHFU7%2BvtfOmSiEmTp%2F245cq5G6jVCkRL3fbpUbsbu0EXUeoVkoACX2Zu"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56f00eccd08be8-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:52 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Kiddushin%205a "HTTP/1.1 200 OK"
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:52 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Kiddushin 5a'
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Kiddushin 5a'
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=William Davidson Edition - Vocalized Aramaic, text_type=list
2025-11-27 22:56:52 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 2864 characters
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 2864 characters
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 2864 characters
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:56:52 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Kiddushin 5a': he_text=yes en_text=no
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:52 | INFO     | __main__:search_sources:620 | [1/11] Sefaria lookup result for 'Kiddushin 5a': found=True
2025-11-27 22:56:52 | DEBUG    | __main__:search_sources:632 | Added source: Kiddushin 5a, has_he=True, has_en=False
2025-11-27 22:56:52 | INFO     | __main__:search_sources:614 | [2/11] Looking up: 'Yevamot 62b' (category: Gemara)
2025-11-27 22:56:52 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Yevamot 62b'
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Yevamot%2062b
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A2F70>
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C37AC2C0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A2D60>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:50 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Yevamot%2062b'), (b'x-varnish', b'886112460 885949211'), (b'Age', b'1741'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=Tlzc3xp8lMLvcZ5zQDWET50d%2FIxAWImnuG7JUPFNMXs1H91604cius25qyttCYB5shE4QRHUdqcC0a%2BLwOd3sswfry03o07C%2BjDOJRwp"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56f010ab97b35a-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:52 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Yevamot%2062b "HTTP/1.1 200 OK"
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:52 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Yevamot 62b'
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Yevamot 62b'
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=William Davidson Edition - Vocalized Aramaic, text_type=list
2025-11-27 22:56:52 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 4092 characters
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 4092 characters
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 4092 characters
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:56:52 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Yevamot 62b': he_text=yes en_text=no
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:52 | INFO     | __main__:search_sources:620 | [2/11] Sefaria lookup result for 'Yevamot 62b': found=True
2025-11-27 22:56:52 | DEBUG    | __main__:search_sources:632 | Added source: Yevamot 62b, has_he=True, has_en=False
2025-11-27 22:56:52 | INFO     | __main__:search_sources:614 | [3/11] Looking up: 'Mishneh Torah, Laws of Marriage 15' (category: Rishonim)
2025-11-27 22:56:52 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Mishneh Torah, Laws of Marriage 15'
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Mishneh%20Torah,%20Laws%20of%20Marriage%2015
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C34AA4C0>
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C37AC340> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35BFCD0>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:50 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Mishneh%20Torah,%20Laws%20of%20Marriage%2015'), (b'x-varnish', b'884254363'), (b'Age', b'0'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=ND5h%2Bilez3xGr0w7PG2Wnyme6upeaESblQCsfelp%2FJe312K8bK6fRQdcjplEg0oFJHplBs3vbnzdafAwaHybHsx4k1c6rFVZxeC9HMC7"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56f0119c18c62c-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:52 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Mishneh%20Torah,%20Laws%20of%20Marriage%2015 "HTTP/1.1 200 OK"
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:52 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Mishneh Torah, Laws of Marriage 15'
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Mishneh Torah, Laws of Marriage 15'
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Torat Emet 363, text_type=list
2025-11-27 22:56:52 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 20 items -> 7686 characters
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 7686 characters
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 7616 characters
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:56:52 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Mishneh Torah, Laws of Marriage 15': he_text=yes en_text=no
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:52 | INFO     | __main__:search_sources:620 | [3/11] Sefaria lookup result for 'Mishneh Torah, Laws of Marriage 15': found=True
2025-11-27 22:56:52 | DEBUG    | __main__:search_sources:632 | Added source: Mishneh Torah, Laws of Marriage 15, has_he=True, has_en=False
2025-11-27 22:56:52 | INFO     | __main__:search_sources:614 | [4/11] Looking up: 'Mishneh Torah, Laws of Marriage 21' (category: Rishonim)
2025-11-27 22:56:52 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Mishneh Torah, Laws of Marriage 21'
2025-11-27 22:56:52 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Mishneh%20Torah,%20Laws%20of%20Marriage%2021
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C347D1F0>
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C37AC740> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:52 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FEF10>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:52 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:51 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Mishneh%20Torah,%20Laws%20of%20Marriage%2021'), (b'x-varnish', b'872856836 872850374'), (b'Age', b'1739'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=KDJY2qwMx1p%2BV13fDT%2BPK2fUTCMUgQgbGgi%2BmMDshGGv8W1jpM%2Bd5BXJOe7frkGHA5DGzaPzEwUQmYot57KxZ1TqYoGVDzl7sD0whqUY"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56f0129d38de6d-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:53 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Mishneh%20Torah,%20Laws%20of%20Marriage%2021 "HTTP/1.1 200 OK"
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Mishneh Torah, Laws of Marriage 21'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Mishneh Torah, Laws of Marriage 21'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Torat Emet 363, text_type=list
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 18 items -> 7395 characters
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 7395 characters
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 7344 characters
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Mishneh Torah, Laws of Marriage 21': he_text=yes en_text=no
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:53 | INFO     | __main__:search_sources:620 | [4/11] Sefaria lookup result for 'Mishneh Torah, Laws of Marriage 21': found=True
2025-11-27 22:56:53 | DEBUG    | __main__:search_sources:632 | Added source: Mishneh Torah, Laws of Marriage 21, has_he=True, has_en=False
2025-11-27 22:56:53 | INFO     | __main__:search_sources:614 | [5/11] Looking up: 'Rashi on Kiddushin 5a' (category: Rishonim)
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Rashi on Kiddushin 5a'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Rashi%20on%20Kiddushin%205a
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C346CF70>
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C37ACD40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C344D9D0>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:51 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Rashi%20on%20Kiddushin%205a'), (b'x-varnish', b'862821506 856992476'), (b'Age', b'1680'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=%2Fh2lN3T2clndDcMTU6Q8E5hZX1tkvy%2BIP6WEyfk5XGFBLeCxIMQkRXsSoutZ%2B7iqv%2FII%2FZfrif7MGVPU9jg2%2FtRWmgWNiFFdHxzKicxi"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56f014ddb249aa-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:53 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Rashi%20on%20Kiddushin%205a "HTTP/1.1 200 OK"
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Rashi on Kiddushin 5a'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'lengths', 'length', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Rashi on Kiddushin 5a'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Vilna Edition, text_type=list
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 103 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 3 items -> 172 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 35 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 73 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 54 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 138 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 85 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 2 items -> 423 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 35 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 93 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 41 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 100 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 0 items -> 0 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 52 characters
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 19 items -> 1422 characters
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 1422 characters
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 1416 characters
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Rashi on Kiddushin 5a': he_text=yes en_text=no
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:53 | INFO     | __main__:search_sources:620 | [5/11] Sefaria lookup result for 'Rashi on Kiddushin 5a': found=True
2025-11-27 22:56:53 | DEBUG    | __main__:search_sources:632 | Added source: Rashi on Kiddushin 5a, has_he=True, has_en=False
2025-11-27 22:56:53 | INFO     | __main__:search_sources:614 | [6/11] Looking up: 'Rashba' (category: Rishonim)
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Rashba'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Rashba
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FEA60>
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C37AC840> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C347DD60>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:56:51 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Rashba'), (b'x-varnish', b'850672571 861607357'), (b'Age', b'1476'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=vmszK6W%2Fv8gFZxttKhWWK198ybU6A3hzhNRXKMmTD8iO3DjQSc9MPkROJo6Jhxki1dohRNHAPPs0Ce77%2FK%2F10gAt1k97ltK8YV2MZUAR"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56f0158ca2847d-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:53 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Rashba "HTTP/1.1 404 Not Found"
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Rashba'
2025-11-27 22:56:53 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Rashba'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Rashba"}
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:53 | INFO     | __main__:search_sources:620 | [6/11] Sefaria lookup result for 'Rashba': found=False
2025-11-27 22:56:53 | DEBUG    | __main__:search_sources:632 | Added source: Rashba, has_he=False, has_en=False
2025-11-27 22:56:53 | INFO     | __main__:search_sources:614 | [7/11] Looking up: 'Rosh' (category: Rishonim)
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Rosh'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Rosh
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C358D130>
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C358CA40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35BF610>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:56:51 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Rosh'), (b'x-varnish', b'883523845'), (b'Age', b'0'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=VEMCswB5xw7Omkf7RipNaDpmCyAST11ywGEjnb85%2BWYzEy%2BzYxw8rKR%2Fwc1AwCyznm3jbMaXCBxQ6JDvay8xZTzowWDjR5fDVe%2FW3LiA"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56f0164f75c448-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:53 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Rosh "HTTP/1.1 404 Not Found"
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Rosh'
2025-11-27 22:56:53 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Rosh'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Rosh"}
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:53 | INFO     | __main__:search_sources:620 | [7/11] Sefaria lookup result for 'Rosh': found=False
2025-11-27 22:56:53 | DEBUG    | __main__:search_sources:632 | Added source: Rosh, has_he=False, has_en=False
2025-11-27 22:56:53 | INFO     | __main__:search_sources:614 | [8/11] Looking up: 'Tur, Even HaEzer 61' (category: Rishonim)
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Tur, Even HaEzer 61'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Tur,%20Even%20HaEzer%2061
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A5400>
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C37AC7C0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A24C0>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:51 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Tur,%20Even%20HaEzer%2061'), (b'x-varnish', b'859676760 855973610'), (b'Age', b'1741'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=wFDdbYGIJ%2B%2BNwvfCz0xFUvdC9B1GTWEnOR9eM%2FIlxrqZLcKV0HaG%2BUv1NweWif80YpZDAOOG2xfV4bH%2ByRYc%2B90%2BPgIFXHm5UoKnJiDx"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56f0171894f7ee-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:53 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Tur,%20Even%20HaEzer%2061 "HTTP/1.1 200 OK"
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Tur, Even HaEzer 61'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Tur, Even HaEzer 61'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Even HaEzer, Vilna, 1923, text_type=list
2025-11-27 22:56:53 | DEBUG    | __main__:flatten_text:561 | Flattened text array: 1 items -> 1495 characters
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 1495 characters
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 651 characters
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Tur, Even HaEzer 61': he_text=yes en_text=no
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:53 | INFO     | __main__:search_sources:620 | [8/11] Sefaria lookup result for 'Tur, Even HaEzer 61': found=True
2025-11-27 22:56:53 | DEBUG    | __main__:search_sources:632 | Added source: Tur, Even HaEzer 61, has_he=True, has_en=False
2025-11-27 22:56:53 | INFO     | __main__:search_sources:614 | [9/11] Looking up: 'Shulchan Arukh, Even HaEzer 61:1' (category: Acharonim)
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Shulchan%20Arukh,%20Even%20HaEzer%2061:1
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FA520>
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C37AC040> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FA7F0>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 28 Nov 2025 03:56:51 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Shulchan%20Arukh,%20Even%20HaEzer%2061:1'), (b'x-varnish', b'886079580 855973599'), (b'Age', b'1741'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=5ZS%2FwCLURd2%2B6ZlTn3zfTH2uTIcUxp8DSaOQO%2FJiSJCSqpA0p0GZXpxhLVV%2BoJ1KmOQPqsrkNAc2JMSysord4VD6NeGrZte3qE9XmNPF"}]}'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56f017eb3a447a-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:53 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Shulchan%20Arukh,%20Even%20HaEzer%2061:1 "HTTP/1.1 200 OK"
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 200 for ref='Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:492 | Sefaria response data keys: ['versions', 'available_versions', 'ref', 'heRef', 'sections', 'toSections', 'sectionRef', 'heSectionRef', 'firstAvailableSectionRef', 'isSpanning', 'next', 'prev', 'title', 'book', 'heTitle', 'primary_category', 'type', 'indexTitle', 'categories', 'heIndexTitle', 'isComplex', 'isDependant', 'order', 'collectiveTitle', 'heCollectiveTitle', 'alts', 'textDepth', 'sectionNames', 'addressTypes', 'titleVariants', 'heTitleVariants', 'index_offsets_by_depth', 'warnings']
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:500 | Sefaria returned 1 version(s) for 'Shulchan Arukh, Even HaEzer 61:1'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:506 | Version 0: lang=he, title=Apei Ravrevei: Shulchan Aruch Even HaEzer, Lemberg, 1886, text_type=str
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:514 | Hebrew text captured (before cleaning): 3707 characters
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:523 | Hebrew text after cleaning: 1166 characters
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:524 | English text after cleaning: 0 characters
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:526 | Sefaria fetch result for 'Shulchan Arukh, Even HaEzer 61:1': he_text=yes en_text=no
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:53 | INFO     | __main__:search_sources:620 | [9/11] Sefaria lookup result for 'Shulchan Arukh, Even HaEzer 61:1': found=True
2025-11-27 22:56:53 | DEBUG    | __main__:search_sources:632 | Added source: Shulchan Arukh, Even HaEzer 61:1, has_he=True, has_en=False
2025-11-27 22:56:53 | INFO     | __main__:search_sources:614 | [10/11] Looking up: 'Rivash' (category: Rishonim)
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Rivash'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Rivash
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C37A88E0>
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C37ACB40> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35FC310>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:56:51 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Rivash'), (b'x-varnish', b'883826071 872850882'), (b'Age', b'1680'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=SCgSWMagDVvrURPOAgPJTmR8MBBb4FoIZNzBJ%2BhfrCpImsdtJEJeaSDOYy3vQF%2F6itiTK6OzZkon5wmNGpHgBqrxUl1iuVTDWyF0Rw%3D%3D"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56f0189a2e6d50-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:53 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Rivash "HTTP/1.1 404 Not Found"
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:53 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Rivash'
2025-11-27 22:56:53 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Rivash'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Rivash"}
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:53 | INFO     | __main__:search_sources:620 | [10/11] Sefaria lookup result for 'Rivash': found=False
2025-11-27 22:56:53 | DEBUG    | __main__:search_sources:632 | Added source: Rivash, has_he=False, has_en=False
2025-11-27 22:56:53 | INFO     | __main__:search_sources:614 | [11/11] Looking up: 'Raavad' (category: Rishonim)
2025-11-27 22:56:53 | INFO     | __main__:fetch_text_from_sefaria:473 | Fetching text from Sefaria for ref='Raavad'
2025-11-27 22:56:53 | DEBUG    | __main__:fetch_text_from_sefaria:479 | Sefaria API URL: https://www.sefaria.org/api/v3/texts/Raavad
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.started host='www.sefaria.org' port=443 local_address=None timeout=30.0 socket_options=None
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35EA100>
2025-11-27 22:56:53 | DEBUG    | httpcore.connection:atrace:87 | start_tls.started ssl_context=<ssl.SSLContext object at 0x00000172C37AC5C0> server_hostname='www.sefaria.org' timeout=30.0
2025-11-27 22:56:54 | DEBUG    | httpcore.connection:atrace:87 | start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000172C35EA880>
2025-11-27 22:56:54 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.started request=<Request [b'GET']>
2025-11-27 22:56:54 | DEBUG    | httpcore.http11:atrace:87 | send_request_headers.complete
2025-11-27 22:56:54 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.started request=<Request [b'GET']>
2025-11-27 22:56:54 | DEBUG    | httpcore.http11:atrace:87 | send_request_body.complete
2025-11-27 22:56:54 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.started request=<Request [b'GET']>
2025-11-27 22:56:54 | DEBUG    | httpcore.http11:atrace:87 | receive_response_headers.complete return_value=(b'HTTP/1.1', 404, b'Not Found', [(b'Date', b'Fri, 28 Nov 2025 03:56:52 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Vary', b'Accept-Language, Cookie'), (b'Content-Language', b'en'), (b'url', b'/api/v3/texts/Raavad'), (b'x-varnish', b'883826082 856334545'), (b'Age', b'1477'), (b'access-control-allow-origin', b'*'), (b'strict-transport-security', b'max-age=2592000'), (b'cf-cache-status', b'DYNAMIC'), (b'Nel', b'{"report_to":"cf-nel","success_fraction":0.0,"max_age":604800}'), (b'Report-To', b'{"group":"cf-nel","max_age":604800,"endpoints":[{"url":"https://a.nel.cloudflare.com/report/v4?s=ybF%2Be7vlUeFXNhebtAqVON60%2FxE7s7%2FTC6ivfz%2B0RDXwhYVJMoDAeFHjDAvHgBTLXPCGTHMYw%2BEsSdLls6Z4YtHxYxmm6dmtlob7PA%3D%3D"}]}'), (b'Content-Encoding', b'gzip'), (b'CF-RAY', b'9a56f0196ea4159f-EWR'), (b'Cache-Status', b'node3.env2.dc1.us.techloq.com;detail=no-cache'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Referrer-Policy', b'no-referrer-when-downgrade')])
2025-11-27 22:56:54 | INFO     | httpx:_send_single_request:1740 | HTTP Request: GET https://www.sefaria.org/api/v3/texts/Raavad "HTTP/1.1 404 Not Found"
2025-11-27 22:56:54 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.started request=<Request [b'GET']>
2025-11-27 22:56:54 | DEBUG    | httpcore.http11:atrace:87 | receive_response_body.complete
2025-11-27 22:56:54 | DEBUG    | httpcore.http11:atrace:87 | response_closed.started
2025-11-27 22:56:54 | DEBUG    | httpcore.http11:atrace:87 | response_closed.complete
2025-11-27 22:56:54 | INFO     | __main__:fetch_text_from_sefaria:489 | Sefaria HTTP status code: 404 for ref='Raavad'
2025-11-27 22:56:54 | WARNING  | __main__:fetch_text_from_sefaria:535 | Sefaria returned status 404 for 'Raavad'
2025-11-27 22:56:54 | DEBUG    | __main__:fetch_text_from_sefaria:536 | Response content: {"error": "Could not find title in reference: Raavad"}
2025-11-27 22:56:54 | DEBUG    | httpcore.connection:atrace:87 | close.started
2025-11-27 22:56:54 | DEBUG    | httpcore.connection:atrace:87 | close.complete
2025-11-27 22:56:54 | INFO     | __main__:search_sources:620 | [11/11] Sefaria lookup result for 'Raavad': found=False
2025-11-27 22:56:54 | DEBUG    | __main__:search_sources:632 | Added source: Raavad, has_he=False, has_en=False
2025-11-27 22:56:54 | WARNING  | __main__:search_sources:640 | Filtered out 4 invalid/unfound sources
2025-11-27 22:56:54 | DEBUG    | __main__:search_sources:642 | Invalid references: ['Rashba', 'Rosh', 'Rivash', 'Raavad']
2025-11-27 22:56:54 | INFO     | __main__:search_sources:644 | ================================================================================
2025-11-27 22:56:54 | INFO     | __main__:search_sources:645 | Request complete: Returning 7 valid sources to client
2025-11-27 22:56:54 | INFO     | __main__:search_sources:646 | ================================================================================
